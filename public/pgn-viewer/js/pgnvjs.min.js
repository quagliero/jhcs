var Chess=function(e){var t="b",n="w",r=-1,o="p",i="n",a="b",s="r",l="q",u="k",c="pnbrqkPNBRQK",f="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",d=["1-0","0-1","1/2-1/2","*"],p={b:[16,32,17,15],w:[-16,-32,-17,-15]},g={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},h=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],v=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],m={p:0,n:1,b:2,r:3,q:4,k:5},b={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},y={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},w=7,x=6,k=1,E=0,C={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},O={w:[{square:C.a1,flag:y.QSIDE_CASTLE},{square:C.h1,flag:y.KSIDE_CASTLE}],b:[{square:C.a8,flag:y.QSIDE_CASTLE},{square:C.h8,flag:y.KSIDE_CASTLE}]},_=new Array(128),S={w:r,b:r},A=n,M={w:0,b:0},N=r,P=0,T=1,L=[],j={};function R(){_=new Array(128),S={w:r,b:r},A=n,M={w:0,b:0},N=r,P=0,T=1,L=[],j={},K(q())}function I(){B(f)}function B(e){var o=e.split(/\s+/),i=o[0],a=0;if(!D(e).valid)return!1;R();for(var s=0;s<i.length;s++){var l=i.charAt(s);if("/"===l)a+=8;else if(-1!=="0123456789".indexOf(l))a+=parseInt(l,10);else{var u=l<"a"?n:t;G({type:l.toLowerCase(),color:u},ae(a)),a++}}return A=o[1],o[2].indexOf("K")>-1&&(M.w|=y.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(M.w|=y.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(M.b|=y.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(M.b|=y.QSIDE_CASTLE),N="-"===o[3]?r:C[o[3]],P=parseInt(o[4],10),T=parseInt(o[5],10),K(q()),!0}function D(e){var t="No errors.",n="FEN string must contain six space-delimited fields.",r="6th field (move number) must be a positive integer.",o="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",a="3rd field (castling availability) is invalid.",s="2nd field (side to move) is invalid.",l="1st field (piece positions) does not contain 8 '/'-delimited rows.",u="1st field (piece positions) is invalid [consecutive numbers].",c="1st field (piece positions) is invalid [invalid piece].",f="1st field (piece positions) is invalid [row too large].",d="Illegal en-passant square",p=e.split(/\s+/);if(6!==p.length)return{valid:!1,error_number:1,error:n};if(isNaN(p[5])||parseInt(p[5],10)<=0)return{valid:!1,error_number:2,error:r};if(isNaN(p[4])||parseInt(p[4],10)<0)return{valid:!1,error_number:3,error:o};if(!/^(-|[abcdefgh][36])$/.test(p[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(p[2]))return{valid:!1,error_number:5,error:a};if(!/^(w|b)$/.test(p[1]))return{valid:!1,error_number:6,error:s};var g=p[0].split("/");if(8!==g.length)return{valid:!1,error_number:7,error:l};for(var h=0;h<g.length;h++){for(var v=0,m=!1,b=0;b<g[h].length;b++)if(isNaN(g[h][b])){if(!/^[prnbqkPRNBQK]$/.test(g[h][b]))return{valid:!1,error_number:9,error:c};v+=1,m=!1}else{if(m)return{valid:!1,error_number:8,error:u};v+=parseInt(g[h][b],10),m=!0}if(8!==v)return{valid:!1,error_number:10,error:f}}return"3"==p[3][1]&&"w"==p[1]||"6"==p[3][1]&&"b"==p[1]?{valid:!1,error_number:11,error:d}:{valid:!0,error_number:0,error:t}}function q(){for(var e=0,o="",i=C.a8;i<=C.h1;i++){if(null==_[i])e++;else{e>0&&(o+=e,e=0);var a=_[i].color,s=_[i].type;o+=a===n?s.toUpperCase():s.toLowerCase()}i+1&136&&(e>0&&(o+=e),i!==C.h1&&(o+="/"),e=0,i+=8)}var l="";M[n]&y.KSIDE_CASTLE&&(l+="K"),M[n]&y.QSIDE_CASTLE&&(l+="Q"),M[t]&y.KSIDE_CASTLE&&(l+="k"),M[t]&y.QSIDE_CASTLE&&(l+="q"),l=l||"-";var u=N===r?"-":ae(N);return[o,A,l,u,P,T].join(" ")}function U(e){for(var t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(j[e[t]]=e[t+1]);return j}function K(e){L.length>0||(e!==f?(j.SetUp="1",j.FEN=e):(delete j.SetUp,delete j.FEN))}function F(e){var t=_[C[e]];return t?{type:t.type,color:t.color}:null}function G(e,t){if(!("type"in e&&"color"in e))return!1;if(-1===c.indexOf(e.type.toLowerCase()))return!1;if(!(t in C))return!1;var n=C[t];return(e.type!=u||S[e.color]==r||S[e.color]==n)&&(_[n]={type:e.type,color:e.color},e.type===u&&(S[e.color]=n),K(q()),!0)}function H(e,t,n,r,i){var a={color:A,from:t,to:n,flags:r,piece:e[t].type};return i&&(a.flags|=y.PROMOTION,a.promotion=i),e[n]?a.captured=e[n].type:r&y.EP_CAPTURE&&(a.captured=o),a}function $(e){function t(e,t,n,r,u){if(e[n].type!==o||oe(r)!==E&&oe(r)!==w)t.push(H(e,n,r,u));else for(var c=[l,s,a,i],f=0,d=c.length;f<d;f++)t.push(H(e,n,r,u,c[f]))}var n=[],r=A,u=se(r),c={b:k,w:x},f=C.a8,d=C.h1,h=!1,v=!(void 0!==e&&"legal"in e)||e.legal;if(void 0!==e&&"square"in e){if(!(e.square in C))return[];f=d=C[e.square],h=!0}for(var m=f;m<=d;m++)if(136&m)m+=7;else{var b=_[m];if(null!=b&&b.color===r)if(b.type===o){var O=m+p[r][0];if(null==_[O]){t(_,n,m,O,y.NORMAL);O=m+p[r][1];c[r]===oe(m)&&null==_[O]&&t(_,n,m,O,y.BIG_PAWN)}for(P=2;P<4;P++){136&(O=m+p[r][P])||(null!=_[O]&&_[O].color===u?t(_,n,m,O,y.CAPTURE):O===N&&t(_,n,m,N,y.EP_CAPTURE))}}else for(var P=0,T=g[b.type].length;P<T;P++){var L=g[b.type][P];for(O=m;!(136&(O+=L));){if(null!=_[O]){if(_[O].color===r)break;t(_,n,m,O,y.CAPTURE);break}if(t(_,n,m,O,y.NORMAL),"n"===b.type||"k"===b.type)break}}}if(!h||d===S[r]){if(M[r]&y.KSIDE_CASTLE){var j=(R=S[r])+2;null!=_[R+1]||null!=_[j]||W(u,S[r])||W(u,R+1)||W(u,j)||t(_,n,S[r],j,y.KSIDE_CASTLE)}if(M[r]&y.QSIDE_CASTLE){var R;j=(R=S[r])-2;null!=_[R-1]||null!=_[R-2]||null!=_[R-3]||W(u,S[r])||W(u,R-1)||W(u,j)||t(_,n,S[r],j,y.QSIDE_CASTLE)}}if(!v)return n;var I=[];for(m=0,T=n.length;m<T;m++)te(n[m]),X(r)||I.push(n[m]),ne();return I}function V(e,t){var n="";if(e.flags&y.KSIDE_CASTLE)n="O-O";else if(e.flags&y.QSIDE_CASTLE)n="O-O-O";else{var r=function(e,t){for(var n=$({legal:!t}),r=e.from,o=e.to,i=e.piece,a=0,s=0,l=0,u=0,c=n.length;u<c;u++){var f=n[u].from,d=n[u].to,p=n[u].piece;i===p&&r!==f&&o===d&&(a++,oe(r)===oe(f)&&s++,ie(r)===ie(f)&&l++)}if(a>0)return s>0&&l>0?ae(r):l>0?ae(r).charAt(1):ae(r).charAt(0);return""}(e,t);e.piece!==o&&(n+=e.piece.toUpperCase()+r),e.flags&(y.CAPTURE|y.EP_CAPTURE)&&(e.piece===o&&(n+=ae(e.from)[0]),n+="x"),n+=ae(e.to),e.flags&y.PROMOTION&&(n+="="+e.promotion.toUpperCase())}return te(e),Y()&&(Q()?n+="#":n+="+"),ne(),n}function z(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function W(e,r){for(var i=C.a8;i<=C.h1;i++)if(136&i)i+=7;else if(null!=_[i]&&_[i].color===e){var a=_[i],s=i-r,l=s+119;if(h[l]&1<<m[a.type]){if(a.type===o){if(s>0){if(a.color===n)return!0}else if(a.color===t)return!0;continue}if("n"===a.type||"k"===a.type)return!0;for(var u=v[l],c=i+u,f=!1;c!==r;){if(null!=_[c]){f=!0;break}c+=u}if(!f)return!0}}return!1}function X(e){return W(se(e),S[e])}function Y(){return X(A)}function Q(){return Y()&&0===$().length}function J(){return!Y()&&0===$().length}function Z(){for(var e={},t=[],n=0,r=0,o=C.a8;o<=C.h1;o++)if(r=(r+1)%2,136&o)o+=7;else{var s=_[o];s&&(e[s.type]=s.type in e?e[s.type]+1:1,s.type===a&&t.push(r),n++)}if(2===n)return!0;if(3===n&&(1===e[a]||1===e[i]))return!0;if(n===e[a]+2){var l=0,u=t.length;for(o=0;o<u;o++)l+=t[o];if(0===l||l===u)return!0}return!1}function ee(){for(var e=[],t={},n=!1;;){var r=ne();if(!r)break;e.push(r)}for(;;){var o=q().split(" ").slice(0,4).join(" ");if(t[o]=o in t?t[o]+1:1,t[o]>=3&&(n=!0),!e.length)break;te(e.pop())}return n}function te(e){var n=A,i=se(n);if(function(e){L.push({move:e,kings:{b:S.b,w:S.w},turn:A,castling:{b:M.b,w:M.w},ep_square:N,half_moves:P,move_number:T})}(e),_[e.to]=_[e.from],_[e.from]=null,e.flags&y.EP_CAPTURE&&(A===t?_[e.to-16]=null:_[e.to+16]=null),e.flags&y.PROMOTION&&(_[e.to]={type:e.promotion,color:n}),_[e.to].type===u){if(S[_[e.to].color]=e.to,e.flags&y.KSIDE_CASTLE){var a=e.to-1,s=e.to+1;_[a]=_[s],_[s]=null}else if(e.flags&y.QSIDE_CASTLE){a=e.to+1,s=e.to-2;_[a]=_[s],_[s]=null}M[n]=""}if(M[n])for(var l=0,c=O[n].length;l<c;l++)if(e.from===O[n][l].square&&M[n]&O[n][l].flag){M[n]^=O[n][l].flag;break}if(M[i])for(l=0,c=O[i].length;l<c;l++)if(e.to===O[i][l].square&&M[i]&O[i][l].flag){M[i]^=O[i][l].flag;break}N=e.flags&y.BIG_PAWN?"b"===A?e.to-16:e.to+16:r,e.piece===o?P=0:e.flags&(y.CAPTURE|y.EP_CAPTURE)?P=0:P++,A===t&&T++,A=se(A)}function ne(){var e=L.pop();if(null==e)return null;var n=e.move;S=e.kings,A=e.turn,M=e.castling,N=e.ep_square,P=e.half_moves,T=e.move_number;var r,i,a=A,s=se(A);if(_[n.from]=_[n.to],_[n.from].type=n.piece,_[n.to]=null,n.flags&y.CAPTURE)_[n.to]={type:n.captured,color:s};else if(n.flags&y.EP_CAPTURE){var l;l=a===t?n.to-16:n.to+16,_[l]={type:o,color:s}}n.flags&(y.KSIDE_CASTLE|y.QSIDE_CASTLE)&&(n.flags&y.KSIDE_CASTLE?(r=n.to+1,i=n.to-1):n.flags&y.QSIDE_CASTLE&&(r=n.to-2,i=n.to+1),_[r]=_[i],_[i]=null);return n}function re(e,t){var n=z(e);if(t){var r=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(r)var o=r[1],i=r[2],a=r[3],s=r[4]}for(var l=$(),u=0,c=l.length;u<c;u++){if(n===z(V(l[u]))||t&&n===z(V(l[u],!0)))return l[u];if(r&&(!o||o.toLowerCase()==l[u].piece)&&C[i]==l[u].from&&C[a]==l[u].to&&(!s||s.toLowerCase()==l[u].promotion))return l[u]}return null}function oe(e){return e>>4}function ie(e){return 15&e}function ae(e){var t=ie(e),n=oe(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function se(e){return e===n?t:n}function le(e){var t=function e(t){var n=t instanceof Array?[]:{};for(var r in t)n[r]="object"==typeof r?e(t[r]):t[r];return n}(e);t.san=V(t,!1),t.to=ae(t.to),t.from=ae(t.from);var n="";for(var r in y)y[r]&t.flags&&(n+=b[r]);return t.flags=n,t}function ue(e){return e.replace(/^\s+|\s+$/g,"")}return B(void 0===e?f:e),{WHITE:n,BLACK:t,PAWN:o,KNIGHT:i,BISHOP:a,ROOK:s,QUEEN:l,KING:u,SQUARES:function(){for(var e=[],t=C.a8;t<=C.h1;t++)136&t?t+=7:e.push(ae(t));return e}(),FLAGS:b,load:function(e){return B(e)},reset:function(){return I()},moves:function(e){for(var t=$(e),n=[],r=0,o=t.length;r<o;r++)void 0!==e&&"verbose"in e&&e.verbose?n.push(le(t[r])):n.push(V(t[r],!1));return n},in_check:function(){return Y()},in_checkmate:function(){return Q()},in_stalemate:function(){return J()},in_draw:function(){return P>=100||J()||Z()||ee()},insufficient_material:function(){return Z()},in_threefold_repetition:function(){return ee()},game_over:function(){return P>=100||Q()||J()||Z()||ee()},validate_fen:function(e){return D(e)},fen:function(){return q()},pgn:function(e){var t="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\n",n="object"==typeof e&&"number"==typeof e.max_width?e.max_width:0,r=[],o=!1;for(var i in j)r.push("["+i+' "'+j[i]+'"]'+t),o=!0;o&&L.length&&r.push(t);for(var a=[];L.length>0;)a.push(ne());for(var s=[],l="";a.length>0;){var u=a.pop();L.length||"b"!==u.color?"w"===u.color&&(l.length&&s.push(l),l=T+"."):l=T+". ...",l=l+" "+V(u,!1),te(u)}if(l.length&&s.push(l),void 0!==j.Result&&s.push(j.Result),0===n)return r.join("")+s.join(" ");var c=0;for(i=0;i<s.length;i++)c+s[i].length>n&&0!==i?(" "===r[r.length-1]&&r.pop(),r.push(t),c=0):0!==i&&(r.push(" "),c++),r.push(s[i]),c+=s[i].length;return r.join("")},load_pgn:function(e,t){var n=void 0!==t&&"sloppy"in t&&t.sloppy;function r(e){return e.replace(/\\/g,"\\")}var o="object"==typeof t&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",i=new RegExp("^(\\[(.|"+r(o)+")*\\])("+r(o)+")*1.("+r(o)+"|.)*$","g"),a=e.replace(i,"$1");"["!==a[0]&&(a=""),I();var s=function(e,t){for(var n="object"==typeof t&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",o={},i=e.split(new RegExp(r(n))),a="",s="",l=0;l<i.length;l++)a=i[l].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),s=i[l].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),ue(a).length>0&&(o[a]=s);return o}(a,t);for(var l in s)U([l,s[l]]);if("1"===s.SetUp&&!("FEN"in s&&B(s.FEN)))return!1;var u=e.replace(a,"").replace(new RegExp(r(o),"g")," ");u=u.replace(/(\{[^}]+\})+?/g,"");for(var c=/(\([^\(\)]+\))+?/g;c.test(u);)u=u.replace(c,"");var f=ue(u=(u=(u=u.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));f=f.join(",").replace(/,,+/g,",").split(",");for(var p="",g=0;g<f.length-1;g++){if(null==(p=re(f[g],n)))return!1;te(p)}if(p=f[f.length-1],d.indexOf(p)>-1)(function(e){for(var t in e)return!0;return!1})(j)&&void 0===j.Result&&U(["Result",p]);else{if(null==(p=re(p,n)))return!1;te(p)}return!0},header:function(){return U(arguments)},ascii:function(){return function(){for(var e="   +------------------------+\n",t=C.a8;t<=C.h1;t++){if(0===ie(t)&&(e+=" "+"87654321"[oe(t)]+" |"),null==_[t])e+=" . ";else{var r=_[t].type;e+=" "+(_[t].color===n?r.toUpperCase():r.toLowerCase())+" "}t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h\n"}()},turn:function(){return A},move:function(e,t){var n=void 0!==t&&"sloppy"in t&&t.sloppy,r=null;if("string"==typeof e)r=re(e,n);else if("object"==typeof e)for(var o=$(),i=0,a=o.length;i<a;i++)if(!(e.from!==ae(o[i].from)||e.to!==ae(o[i].to)||"promotion"in o[i]&&e.promotion!==o[i].promotion)){r=o[i];break}if(!r)return null;var s=le(r);return te(r),s},undo:function(){var e=ne();return e?le(e):null},clear:function(){return R()},put:function(e,t){return G(e,t)},get:function(e){return F(e)},remove:function(e){return function(e){var t=F(e);return _[C[e]]=null,t&&t.type===u&&(S[t.color]=r),K(q()),t}(e)},perft:function(e){return function e(t){for(var n=$({legal:!1}),r=0,o=A,i=0,a=n.length;i<a;i++)te(n[i]),X(o)||(t-1>0?r+=e(t-1):r++),ne();return r}(e)},square_color:function(e){if(e in C){var t=C[e];return(oe(t)+ie(t))%2==0?"light":"dark"}return null},history:function(e){for(var t=[],n=[],r=(void 0!==e&&"verbose"in e&&e.verbose);L.length>0;)t.push(ne());for(;t.length>0;){var o=t.pop();r?n.push(le(o)):n.push(V(o)),te(o)}return n}}};function StringBuilder(e){var t={};t.strings=new Array("");var n=function(e){e&&t.strings.push(e)};return n(e),{append:n,clear:function(){t.strings.length=1},toString:function(){return t.strings.join("")},length:function(){return t.strings.reduce(function(e,t,n,r){return e+t.length},0)},isEmpty:function(){for(var e=0;e<t.strings.length;e++)if(t.strings[e].length>0)return!1;return!0},lastChar:function(){return 0===t.strings.length?null:t.strings[t.strings.length-1].slice(-1)}}}function Utils(){var e,t=Array.isArray,n=Object.keys,r=(Object.create,Math.pow(2,53)-1),o=function(e){var t=a(e);return"number"==typeof t&&t>=0&&t<=r},i=t||function(e){return Array.isArray(e)},a=(e="length",function(t){return null==t?void 0:t[e]});var s=function(e,t){return null!=e&&hasOwnProperty.call(e,t)};return{pvEach:function(e,t,n){var r,i;if(t=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)}}return function(){return e.apply(t,arguments)}}(t,n),o(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var a=a(e);for(r=0,i=a.length;r<i;r++)t(e[a[r]],a[r],e)}return e},pvIsElement:function(e){return!(!e||1!==e.nodeType)},pvIsEmpty:function(e){return null==e||(o(e)&&(i(e)||function(e){return"[object String]"===toString.call(e)}(e)||function(e){return"[object Arguments]"===toString.call(e)}(e))?0===e.length:0===function(e){if(!function(e){var t=typeof e;return"function"===t||"object"===t&&!!e}(e))return[];if(n)return n(e);var t=[];for(var r in e)s(e,r)&&t.push(r);return hasEnumBug&&collectNonEnumProps(e,t),t}(e).length)}}}"undefined"!=typeof exports&&(exports.Chess=Chess),"undefined"!=typeof define&&define(function(){return Chess}),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Chessground=e()}(function(){return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){return o(t[a][1][e]||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";function r(e,t){var n=e(t);return t.dom.redraw(),n}function o(e,t){return{key:e,pos:s.key2pos(e),piece:t}}function i(e){for(var t in e)return!1;return!0}var a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("./util");n.anim=function(e,t){return t.animation.enabled?function(e,t){var n=a({},t.pieces),r=e(t),u=function(e,t){var n,r,i,a,l={},u=[],c={},f=[],d=[],p={};for(i in e)p[i]=o(i,e[i]);for(var g=0,h=s.allKeys;g<h.length;g++){var v=h[g];n=t.pieces[v],r=p[v],n?r?s.samePiece(n,r.piece)||(f.push(r),d.push(o(v,n))):d.push(o(v,n)):r&&f.push(r)}return d.forEach(function(e){var t;t=e,(r=f.filter(function(t){return s.samePiece(e.piece,t.piece)}).sort(function(e,n){return s.distanceSq(t.pos,e.pos)-s.distanceSq(t.pos,n.pos)})[0])&&(a=[r.pos[0]-e.pos[0],r.pos[1]-e.pos[1]],l[e.key]=a.concat(a),u.push(r.key))}),f.forEach(function(e){s.containsX(u,e.key)||t.items&&t.items(e.pos,e.key)||(c[e.key]=e.piece)}),{anims:l,fadings:c}}(n,t);if(i(u.anims)&&i(u.fadings))t.dom.redraw();else{var c=t.animation.current&&t.animation.current.start;t.animation.current={start:l.now(),frequency:1/t.animation.duration,plan:u},c||function e(t,n){var r=t.animation.current;if(void 0!==r){var o=1-(n-r.start)*r.frequency;if(o<=0)t.animation.current=void 0,t.dom.redrawNow();else{var i=o<.5?4*o*o*o:(o-1)*(2*o-2)*(2*o-2)+1;for(var a in r.plan.anims){var u=r.plan.anims[a];u[2]=u[0]*i,u[3]=u[1]*i}t.dom.redrawNow(!0),s.raf(function(n){return void 0===n&&(n=l.now()),e(t,n)})}}else t.dom.destroyed||t.dom.redrawNow()}(t,l.now())}return r}(e,t):r(e,t)},n.render=r;var l=void 0!==window.performance?window.performance:Date},{"./util":17}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./board"),o=e("./fen"),i=e("./config"),a=e("./anim"),s=e("./drag"),l=e("./explosion");n.start=function(e,t){function n(){r.toggleOrientation(e),t()}return{set:function(t){t.orientation&&t.orientation!==e.orientation&&n(),(t.fen?a.anim:a.render)(function(e){return i.configure(e,t)},e)},state:e,getFen:function(){return o.write(e.pieces)},toggleOrientation:n,setPieces:function(t){a.anim(function(e){return r.setPieces(e,t)},e)},selectSquare:function(t,n){t?a.anim(function(e){return r.selectSquare(e,t,n)},e):e.selected&&(r.unselect(e),e.dom.redraw())},move:function(t,n){a.anim(function(e){return r.baseMove(e,t,n)},e)},newPiece:function(t,n){a.anim(function(e){return r.baseNewPiece(e,t,n)},e)},playPremove:function(){if(e.premovable.current){if(a.anim(r.playPremove,e))return!0;e.dom.redraw()}return!1},playPredrop:function(t){if(e.predroppable.current){var n=r.playPredrop(e,t);return e.dom.redraw(),n}return!1},cancelPremove:function(){a.render(r.unsetPremove,e)},cancelPredrop:function(){a.render(r.unsetPredrop,e)},cancelMove:function(){a.render(function(e){r.cancelMove(e),s.cancel(e)},e)},stop:function(){a.render(function(e){r.stop(e),s.cancel(e)},e)},explode:function(t){l.default(e,t)},setAutoShapes:function(t){a.render(function(e){return e.drawable.autoShapes=t},e)},setShapes:function(t){a.render(function(e){return e.drawable.shapes=t},e)},getKeyAtDomPos:function(t){return r.getKeyAtDomPos(t,"white"===e.orientation,e.dom.bounds())},redrawAll:t,dragNewPiece:function(t,n,r){s.dragNewPiece(e,t,n,r)},destroy:function(){r.stop(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}},{"./anim":1,"./board":3,"./config":5,"./drag":6,"./explosion":9,"./fen":10}],3:[function(e,t,n){"use strict";function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&setTimeout(function(){return e.apply(void 0,t)},1)}function o(e){e.premovable.current&&(e.premovable.current=void 0,r(e.premovable.events.unset))}function i(e){var t=e.predroppable;t.current&&(t.current=void 0,r(t.events.unset))}function a(e,t,n){if(t===n||!e.pieces[t])return!1;var o=e.pieces[n]&&e.pieces[n].color!==e.pieces[t].color?e.pieces[n]:void 0;return n==e.selected&&f(e),r(e.events.move,t,n,o),function(e,t,n){if(!e.autoCastle)return!1;var r=e.pieces[t];if("king"!==r.role)return!1;var o=v.key2pos(t);if(5!==o[0])return!1;if(1!==o[1]&&8!==o[1])return!1;var i,a,s,l=v.key2pos(n);if(7===l[0]||8===l[0])i=v.pos2key([8,o[1]]),a=v.pos2key([6,o[1]]),s=v.pos2key([7,o[1]]);else{if(3!==l[0]&&1!==l[0])return!1;i=v.pos2key([1,o[1]]),a=v.pos2key([4,o[1]]),s=v.pos2key([3,o[1]])}var u=e.pieces[i];return"rook"===u.role&&(delete e.pieces[t],delete e.pieces[i],e.pieces[s]=r,e.pieces[a]=u,!0)}(e,t,n)||(e.pieces[n]=e.pieces[t],delete e.pieces[t]),e.lastMove=[t,n],e.check=void 0,r(e.events.change),o||!0}function s(e,t,n,o){if(e.pieces[n]){if(!o)return!1;delete e.pieces[n]}return r(e.events.dropNewPiece,t,n),e.pieces[n]=t,e.lastMove=[n],e.check=void 0,r(e.events.change),e.movable.dests=void 0,e.turnColor=v.opposite(e.turnColor),!0}function l(e,t,n){var r=a(e,t,n);return r&&(e.movable.dests=void 0,e.turnColor=v.opposite(e.turnColor),e.animation.current=void 0),r}function u(e,t,n){if(p(e,t,n)){var o=l(e,t,n);if(o){var a=e.hold.stop();f(e);var s={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:a};return!0!==o&&(s.captured=o),r(e.movable.events.after,t,n,s),!0}}else!function(e,t,n){return t!==n&&g(e,t)&&v.containsX(m.default(e.pieces,t,e.premovable.castle),n)}(e,t,n)?d(e,n)||g(e,n)?(c(e,n),e.hold.start()):f(e):(function(e,t,n,o){i(e),e.premovable.current=[t,n],r(e.premovable.events.set,t,n,o)}(e,t,n,{ctrlKey:e.stats.ctrlKey}),f(e));return!1}function c(e,t){e.selected=t,g(e,t)?e.premovable.dests=m.default(e.pieces,t,e.premovable.castle):e.premovable.dests=void 0}function f(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function d(e,t){var n=e.pieces[t];return n&&("both"===e.movable.color||e.movable.color===n.color&&e.turnColor===n.color)}function p(e,t,n){return t!==n&&d(e,t)&&(e.movable.free||!!e.movable.dests&&v.containsX(e.movable.dests[t],n))}function g(e,t){var n=e.pieces[t];return n&&e.premovable.enabled&&e.movable.color===n.color&&e.turnColor!==n.color}function h(e){o(e),i(e),f(e)}Object.defineProperty(n,"__esModule",{value:!0});var v=e("./util"),m=e("./premove");n.callUserFunction=r,n.toggleOrientation=function(e){e.orientation=v.opposite(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0},n.reset=function(e){e.lastMove=void 0,f(e),o(e),i(e)},n.setPieces=function(e,t){for(var n in t){var r=t[n];r?e.pieces[n]=r:delete e.pieces[n]}},n.setCheck=function(e,t){if(!0===t&&(t=e.turnColor),t)for(var n in e.pieces)"king"===e.pieces[n].role&&e.pieces[n].color===t&&(e.check=n);else e.check=void 0},n.unsetPremove=o,n.unsetPredrop=i,n.baseMove=a,n.baseNewPiece=s,n.userMove=u,n.dropNewPiece=function(e,t,n,a){if(function(e,t,n){var r=e.pieces[t];return r&&n&&(t===n||!e.pieces[n])&&("both"===e.movable.color||e.movable.color===r.color&&e.turnColor===r.color)}(e,t,n)||a){var l=e.pieces[t];delete e.pieces[t],s(e,l,n,a),r(e.movable.events.afterNewPiece,l.role,n,{predrop:!1})}else!function(e,t,n){var r=e.pieces[t];return r&&n&&(!e.pieces[n]||e.pieces[n].color!==e.movable.color)&&e.predroppable.enabled&&("pawn"!==r.role||"1"!==n[1]&&"8"!==n[1])&&e.movable.color===r.color&&e.turnColor!==r.color}(e,t,n)?(o(e),i(e)):function(e,t,n){o(e),e.predroppable.current={role:t,key:n},r(e.predroppable.events.set,t,n)}(e,e.pieces[t].role,n);delete e.pieces[t],f(e)},n.selectSquare=function(e,t,n){e.selected?e.selected!==t||e.draggable.enabled?(e.selectable.enabled||n)&&e.selected!==t?u(e,e.selected,t)&&(e.stats.dragged=!1):e.hold.start():(f(e),e.hold.cancel()):(d(e,t)||g(e,t))&&(c(e,t),e.hold.start()),r(e.events.select,t)},n.setSelected=c,n.unselect=f,n.canMove=p,n.isDraggable=function(e,t){var n=e.pieces[t];return n&&e.draggable.enabled&&("both"===e.movable.color||e.movable.color===n.color&&(e.turnColor===n.color||e.premovable.enabled))},n.playPremove=function(e){var t=e.premovable.current;if(!t)return!1;var n=t[0],i=t[1],a=!1;if(p(e,n,i)){var s=l(e,n,i);if(s){var u={premove:!0};!0!==s&&(u.captured=s),r(e.movable.events.after,n,i,u),a=!0}}return o(e),a},n.playPredrop=function(e,t){var n=e.predroppable.current,o=!1;return!!n&&(t(n)&&s(e,{role:n.role,color:e.movable.color},n.key)&&(r(e.movable.events.afterNewPiece,n.role,n.key,{predrop:!0}),o=!0),i(e),o)},n.cancelMove=h,n.stop=function(e){e.movable.color=e.movable.dests=e.animation.current=void 0,h(e)},n.getKeyAtDomPos=function(e,t,n){var r=Math.ceil((e[0]-n.left)/n.width*8);t||(r=9-r);var o=Math.ceil(8-(e[1]-n.top)/n.height*8);return t||(o=9-o),r>0&&r<9&&o>0&&o<9?v.pos2key([r,o]):void 0}},{"./premove":12,"./util":17}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./api"),o=e("./config"),i=e("./state"),a=e("./wrap"),s=e("./events"),l=e("./render"),u=e("./svg"),c=e("./util");n.Chessground=function(e,t){function n(){var t=f.dom&&f.dom.unbind;e.classList.add("cg-board-wrap");var r=c.memo(function(){return e.getBoundingClientRect()}),o=f.viewOnly&&!f.drawable.visible,i=a.default(e,f,o?void 0:r()),d=function(e){l.default(f),!e&&i.svg&&u.renderSvg(f,i.svg)};f.dom={elements:i,bounds:r,redraw:function(e){var t=!1;return function(){t||(t=!0,c.raf(function(){e(),t=!1}))}}(d),redrawNow:d,unbind:t,relative:o},f.drawable.prevSvgHash="",d(!1),s.bindBoard(f),t||(f.dom.unbind=s.bindDocument(f,n))}var f=i.defaults();return o.configure(f,t||{}),n(),r.start(f,n)}},{"./api":2,"./config":5,"./events":8,"./render":13,"./state":14,"./svg":15,"./util":17,"./wrap":18}],5:[function(e,t,n){"use strict";function r(e,t){for(var n in t)o(e[n])&&o(t[n])?r(e[n],t[n]):e[n]=t[n]}function o(e){return"object"==typeof e}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./board"),a=e("./fen");n.configure=function(e,t){if(t.movable&&t.movable.dests&&(e.movable.dests=void 0),r(e,t),t.fen&&(e.pieces=a.read(t.fen),e.drawable.shapes=[]),t.hasOwnProperty("check")&&i.setCheck(e,t.check||!1),t.hasOwnProperty("lastMove")&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&i.setSelected(e,e.selected),(!e.animation.duration||e.animation.duration<100)&&(e.animation.enabled=!1),!e.movable.rookCastle&&e.movable.dests){var n="white"===e.movable.color?1:8,o="e"+n,s=e.movable.dests[o];if(!s||"king"!==e.pieces[o].role)return;e.movable.dests[o]=s.filter(function(e){return!(e==="a"+n&&-1!==s.indexOf("c"+n)||e==="h"+n&&-1!==s.indexOf("g"+n))})}}},{"./board":3,"./fen":10}],6:[function(e,t,n){"use strict";function r(e){u.raf(function(){var t=e.draggable.current;if(t){e.animation.current&&e.animation.current.plan.anims[t.orig]&&(e.animation.current=void 0);var n=e.pieces[t.orig];if(n&&u.samePiece(n,t.piece)){if(!t.started&&u.distanceSq(t.epos,t.rel)>=Math.pow(e.draggable.distance,2)&&(t.started=!0),t.started){if("function"==typeof t.element){var i=t.element();if(!i)return;t.element=i,t.element.cgDragging=!0,t.element.classList.add("dragging")}var a="white"===e.orientation,s=e.dom.bounds();t.pos=[t.epos[0]-t.rel[0],t.epos[1]-t.rel[1]];var l=u.posToTranslateAbs(s)(t.origPos,a);l[0]+=t.pos[0]+t.dec[0],l[1]+=t.pos[1]+t.dec[1],u.translateAbs(t.element,l)}}else o(e);r(e)}})}function o(e){var t=e.draggable.current;t&&(t.newPiece&&delete e.pieces[t.orig],e.draggable.current=void 0,l.unselect(e),i(e),e.dom.redraw())}function i(e){var t=e.dom.elements;t.ghost&&u.setVisible(t.ghost,!1)}function a(e,t,n){var r=u.key2pos(e);return t||(r[0]=9-r[0],r[1]=9-r[1]),{left:n.left+n.width*(r[0]-1)/8,top:n.top+n.height*(8-r[1])/8,width:n.width/8,height:n.height/8}}function s(e,t){for(var n=e.dom.elements.board.firstChild;n;){if(n.cgKey===t&&"PIECE"===n.tagName)return n;n=n.nextSibling}}Object.defineProperty(n,"__esModule",{value:!0});var l=e("./board"),u=e("./util"),c=e("./draw"),f=e("./anim");n.start=function(e,t){if(!(void 0!==t.button&&0!==t.button||t.touches&&t.touches.length>1)){t.preventDefault();var n="white"===e.orientation,o=e.dom.bounds(),i=u.eventPosition(t),d=l.getKeyAtDomPos(i,n,o);if(d){var p=e.pieces[d],g=e.selected;g||!e.drawable.enabled||!e.drawable.eraseOnClick&&p&&p.color===e.turnColor||c.clear(e);var h=!!e.premovable.current,v=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&l.canMove(e,e.selected,d)?f.anim(function(e){return l.selectSquare(e,d)},e):l.selectSquare(e,d);var m=e.selected===d,b=s(e,d);if(p&&b&&m&&l.isDraggable(e,d)){var y=a(d,n,o);e.draggable.current={orig:d,origPos:u.key2pos(d),piece:p,rel:i,epos:i,pos:[0,0],dec:e.draggable.centerPiece?[i[0]-(y.left+y.width/2),i[1]-(y.top+y.height/2)]:[0,0],started:e.draggable.autoDistance&&e.stats.dragged,element:b,previouslySelected:g,originTarget:t.target},b.cgDragging=!0,b.classList.add("dragging");var w=e.dom.elements.ghost;w&&(w.className="ghost "+p.color+" "+p.role,u.translateAbs(w,u.posToTranslateAbs(o)(u.key2pos(d),n)),u.setVisible(w,!0)),r(e)}else h&&l.unsetPremove(e),v&&l.unsetPredrop(e);e.dom.redraw()}}},n.dragNewPiece=function(e,t,n,o){e.pieces.a0=t,e.dom.redraw();var i=u.eventPosition(n),l="white"===e.orientation,c=e.dom.bounds(),f=a("a0",l,c),d=[(l?0:7)*f.width+c.left,(l?8:-1)*f.height+c.top];e.draggable.current={orig:"a0",origPos:u.key2pos("a0"),piece:t,rel:d,epos:i,pos:[i[0]-d[0],i[1]-d[1]],dec:[-f.width/2,-f.height/2],started:!0,element:function(){return s(e,"a0")},originTarget:n.target,newPiece:!0,force:o||!1},r(e)},n.move=function(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.epos=u.eventPosition(t))},n.end=function(e,t){var n=e.draggable.current;if(n)if("touchend"!==t.type||!n||n.originTarget===t.target||n.newPiece){l.unsetPremove(e),l.unsetPredrop(e);var r=u.eventPosition(t)||n.epos,o=l.getKeyAtDomPos(r,"white"===e.orientation,e.dom.bounds());o&&n.started?n.newPiece?l.dropNewPiece(e,n.orig,o,n.force):(e.stats.ctrlKey=t.ctrlKey,l.userMove(e,n.orig,o)&&(e.stats.dragged=!0)):n.newPiece?delete e.pieces[n.orig]:e.draggable.deleteOnDropOff&&(delete e.pieces[n.orig],l.callUserFunction(e.events.change)),(!n||n.orig!==n.previouslySelected||n.orig!==o&&o)&&e.selectable.enabled||l.unselect(e),i(e),e.draggable.current=void 0,e.dom.redraw()}else e.draggable.current=void 0},n.cancel=o},{"./anim":1,"./board":3,"./draw":7,"./util":17}],7:[function(e,t,n){"use strict";function r(e){s.raf(function(){var t=e.drawable.current;if(t){var n=a.getKeyAtDomPos(t.pos,"white"===e.orientation,e.dom.bounds());n!==t.mouseSq&&(t.mouseSq=n,t.dest=n!==t.orig?n:void 0,e.dom.redrawNow()),r(e)}})}function o(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function i(e){e.onChange&&e.onChange(e.shapes)}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./board"),s=e("./util"),l=["green","red","blue","yellow"];n.start=function(e,t){if(!(t.touches&&t.touches.length>1)){t.stopPropagation(),t.preventDefault(),a.cancelMove(e);var n=s.eventPosition(t),o=a.getKeyAtDomPos(n,"white"===e.orientation,e.dom.bounds());o&&(e.drawable.current={orig:o,pos:n,brush:function(e){var t=e.shiftKey&&s.isRightButton(e)?1:0,n=e.altKey?2:0;return l[t+n]}(t)},r(e))}},n.processDraw=r,n.move=function(e,t){e.drawable.current&&(e.drawable.current.pos=s.eventPosition(t))},n.end=function(e){var t=e.drawable.current;t&&(t.mouseSq&&function(e,t){var n=function(e){return e.orig===t.orig&&e.dest===t.dest},r=e.shapes.filter(n)[0];r&&(e.shapes=e.shapes.filter(function(e){return function(t){return!e(t)}}(n))),r&&r.brush===t.brush||e.shapes.push(t),i(e)}(e.drawable,t),o(e))},n.cancel=o,n.clear=function(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),i(e.drawable))}},{"./board":3,"./util":17}],8:[function(e,t,n){"use strict";function r(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n)}}function o(e,t,n){return function(r){r.shiftKey||s.isRightButton(r)?e.drawable.enabled&&n(e,r):e.viewOnly||t(e,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./drag"),a=e("./draw"),s=e("./util");n.bindBoard=function(e){if(!e.viewOnly){var t=e.dom.elements.board,n=function(e){return function(t){e.draggable.current?i.cancel(e):e.drawable.current?a.cancel(e):t.shiftKey||s.isRightButton(t)?e.drawable.enabled&&a.start(e,t):e.viewOnly||i.start(e,t)}}(e);t.addEventListener("touchstart",n),t.addEventListener("mousedown",n),(e.disableContextMenu||e.drawable.enabled)&&t.addEventListener("contextmenu",function(e){return e.preventDefault()})}},n.bindDocument=function(e,t){var n=[];if(!e.dom.relative&&e.resizable&&n.push(r(document.body,"chessground.resize",function(){e.dom.bounds.clear(),s.raf(t)})),!e.viewOnly){var l=o(e,i.move,a.move),u=o(e,i.end,a.end);["touchmove","mousemove"].forEach(function(e){return n.push(r(document,e,l))}),["touchend","mouseup"].forEach(function(e){return n.push(r(document,e,u))});var c=function(){return e.dom.bounds.clear()};n.push(r(window,"scroll",c,{passive:!0})),n.push(r(window,"resize",c,{passive:!0}))}return function(){return n.forEach(function(e){return e()})}}},{"./drag":6,"./draw":7,"./util":17}],9:[function(e,t,n){"use strict";function r(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout(function(){r(e,2),setTimeout(function(){return r(e,void 0)},120)},120)}},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./util"),o=e("./types");n.initial="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR";var i={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},a={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};n.read=function(e){"start"===e&&(e=n.initial);for(var t={},o=8,a=0,s=0,l=e;s<l.length;s++){var u=l[s];switch(u){case" ":return t;case"/":if(0==--o)return t;a=0;break;case"~":t[r.pos2key([a,o])].promoted=!0;break;default:var c=u.charCodeAt(0);if(c<57)a+=c-48;else{++a;var f=u.toLowerCase();t[r.pos2key([a,o])]={role:i[f],color:u===f?"black":"white"}}}}return t},n.write=function(e){var t,n;return r.invRanks.map(function(i){return o.ranks.map(function(o){return(t=e[r.pos2key([o,i])])?(n=a[t.role],"white"===t.color?n.toUpperCase():n):"1"}).join("")}).join("/").replace(/1{2,}/g,function(e){return e.length.toString()})}},{"./types":16,"./util":17}],11:[function(e,t,n){t.exports=e("./chessground").Chessground},{"./chessground":4}],12:[function(e,t,n){"use strict";function r(e,t){return Math.abs(e-t)}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./util"),i=function(e,t,n,o){var i=r(e,n),a=r(t,o);return 1===i&&2===a||2===i&&1===a},a=function(e,t,n,o){return r(e,n)===r(t,o)},s=function(e,t,n,r){return e===n||t===r},l=function(e,t,n,r){return a(e,t,n,r)||s(e,t,n,r)};n.default=function(e,t,n){var u,c=e[t],f=o.key2pos(t);switch(c.role){case"pawn":u=function(e){return function(t,n,o,i){return r(t,o)<2&&("white"===e?i===n+1||n<=2&&i===n+2&&t===o:i===n-1||n>=7&&i===n-2&&t===o)}}(c.color);break;case"knight":u=i;break;case"bishop":u=a;break;case"rook":u=s;break;case"queen":u=l;break;case"king":u=function(e,t,n){return function(i,a,s,l){return r(i,s)<2&&r(a,l)<2||n&&a===l&&a===("white"===e?1:8)&&(5===i&&(3===s||7===s)||o.containsX(t,s))}}(c.color,function(e,t){var n;return Object.keys(e).filter(function(r){return(n=e[r])&&n.color===t&&"rook"===n.role}).map(function(e){return o.key2pos(e)[0]})}(e,c.color),n)}return o.allKeys.map(o.key2pos).filter(function(e){return(f[0]!==e[0]||f[1]!==e[1])&&u(f[0],f[1],e[0],e[1])}).map(o.pos2key)}},{"./util":17}],13:[function(e,t,n){"use strict";function r(e,t){for(var n in t)e.dom.elements.board.removeChild(t[n])}function o(e,t){var n=2+8*(e[1]-1)+(8-e[0]);return t&&(n=67-n),n+""}function i(e){return e.color+" "+e.role}function a(e,t,n){e[t]?e[t]+=" "+n:e[t]=n}Object.defineProperty(n,"__esModule",{value:!0});var s=e("./util"),l=e("./util");n.default=function(e){var t,n,u,c,f,d,p,g,h,v,m,b="white"===e.orientation,y=e.dom.relative?l.posToTranslateRel:l.posToTranslateAbs(e.dom.bounds()),w=e.dom.relative?l.translateRel:l.translateAbs,x=e.dom.elements.board,k=e.pieces,E=e.animation.current,C=E?E.plan.anims:{},O=E?E.plan.fadings:{},_=e.draggable.current,S=function(e){var t,n,r={};if(e.lastMove&&e.highlight.lastMove)for(t in e.lastMove)a(r,e.lastMove[t],"last-move");if(e.check&&e.highlight.check&&a(r,e.check,"check"),e.selected&&(a(r,e.selected,"selected"),e.movable.showDests)){var o=e.movable.dests&&e.movable.dests[e.selected];if(o)for(t in o)a(r,n=o[t],"move-dest"+(e.pieces[n]?" oc":""));var i=e.premovable.dests;if(i)for(t in i)a(r,n=i[t],"premove-dest"+(e.pieces[n]?" oc":""))}var s=e.premovable.current;if(s)for(t in s)a(r,s[t],"current-premove");else e.predroppable.current&&a(r,e.predroppable.current.key,"current-premove");var l=e.exploding;if(l)for(t in l.keys)a(r,l.keys[t],"exploding"+l.stage);return r}(e),A={},M={},N={},P={},T=Object.keys(k);for(u=x.firstChild;u;){if(t=u.cgKey,"PIECE"===u.tagName)c=k[t],d=C[t],p=O[t],f=u.cgPiece,!u.cgDragging||_&&_.orig===t||(u.classList.remove("dragging"),w(u,y(s.key2pos(t),b)),u.cgDragging=!1),!p&&u.cgFading&&(u.cgFading=!1,u.classList.remove("fading")),c?(d&&u.cgAnimating&&f===i(c)?((U=s.key2pos(t))[0]+=d[2],U[1]+=d[3],u.classList.add("anim"),w(u,y(U,b))):u.cgAnimating&&(u.cgAnimating=!1,u.classList.remove("anim"),w(u,y(s.key2pos(t),b)),e.addPieceZIndex&&(u.style.zIndex=o(s.key2pos(t),b))),f!==i(c)||p&&u.cgFading?p&&f===i(p)?(u.classList.add("fading"),u.cgFading=!0):N[f]?N[f].push(u):N[f]=[u]:A[t]=!0):N[f]?N[f].push(u):N[f]=[u];else if("SQUARE"===u.tagName){var L=u.className;S[t]===L?M[t]=!0:P[L]?P[L].push(u):P[L]=[u]}u=u.nextSibling}for(var j in S)if(!M[j]){m=(v=P[S[j]])&&v.pop();var R=y(s.key2pos(j),b);if(m)m.cgKey=j,w(m,R);else{var I=s.createEl("square",S[j]);I.cgKey=j,w(I,R),x.insertBefore(I,x.firstChild)}}for(var B in T)if(n=k[t=T[B]],d=C[t],!A[t])if(h=(g=N[i(n)])&&g.pop())h.cgKey=t,h.cgFading&&(h.classList.remove("fading"),h.cgFading=!1),U=s.key2pos(t),e.addPieceZIndex&&(h.style.zIndex=o(U,b)),d&&(h.cgAnimating=!0,h.classList.add("anim"),U[0]+=d[2],U[1]+=d[3]),w(h,y(U,b));else{var D=i(n),q=s.createEl("piece",D),U=s.key2pos(t);q.cgPiece=D,q.cgKey=t,d&&(q.cgAnimating=!0,U[0]+=d[2],U[1]+=d[3]),w(q,y(U,b)),e.addPieceZIndex&&(q.style.zIndex=o(U,b)),x.appendChild(q)}for(var K in N)r(e,N[K]);for(var K in P)r(e,P[K])}},{"./util":17}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./fen"),o=e("./util");n.defaults=function(){return{pieces:r.read(r.initial),orientation:"white",turnColor:"white",coordinates:!0,autoCastle:!0,viewOnly:!1,disableContextMenu:!1,resizable:!0,addPieceZIndex:!1,pieceKey:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,centerPiece:!0,showGhost:!0,deleteOnDropOff:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15}},pieces:{baseUrl:"https://lichess1.org/assets/piece/cburnett/"},prevSvgHash:""},hold:o.timer()}}},{"./fen":10,"./util":17}],15:[function(e,t,n){"use strict";function r(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function o(e,t,n){var r=e.orig,o=e.dest,i=e.brush,a=e.piece,s=e.modifiers;return[n,r,o,i,o&&t[o]>1,a&&function(e){return[e.color,e.role,e.scale].filter(function(e){return e}).join("")}(a),s&&""+(s.lineWidth||"")].filter(function(e){return e}).join("")}function i(e,t){for(var n in t)e.setAttribute(n,t[n]);return e}function a(e,t){return"white"===t?e:[9-e[0],9-e[1]]}function s(e,t){var n={color:e.color,opacity:Math.round(10*e.opacity)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth)};return n.key=[e.key,t.lineWidth].filter(function(e){return e}).join(""),n}function l(e,t){return(e.opacity||1)*(t?.9:1)}function u(e,t){return[(e[0]-.5)*t.width/8,(8.5-e[1])*t.height/8]}Object.defineProperty(n,"__esModule",{value:!0});var c,f=e("./util");n.createElement=r,n.renderSvg=function(e,t){var n=e.drawable,d=n.current,p=d&&d.mouseSq?d:void 0,g={};n.shapes.concat(n.autoShapes).concat(p?[p]:[]).forEach(function(e){e.dest&&(g[e.dest]=(g[e.dest]||0)+1)});var h=n.shapes.concat(n.autoShapes).map(function(e){return{shape:e,current:!1,hash:o(e,g,!1)}});p&&h.push({shape:p,current:!0,hash:o(p,g,!0)});var v=h.map(function(e){return e.hash}).join("");if(v!==e.drawable.prevSvgHash){e.drawable.prevSvgHash=v;var m=t.firstChild;!function(e,t,n){var o,a={};h.forEach(function(t){t.shape.dest&&(o=e.brushes[t.shape.brush],t.shape.modifiers&&(o=s(o,t.shape.modifiers)),a[o.key]=o)});for(var l={},u=n.firstChild;u;)l[u.getAttribute("cgKey")]=!0,u=u.nextSibling;for(var c in a)l[c]||n.appendChild(function(e){var t=i(r("marker"),{id:"arrowhead-"+e.key,orient:"auto",markerWidth:4,markerHeight:8,refX:2.05,refY:2.01});return t.appendChild(i(r("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}(a[c]))}(n,0,m),function(e,t,n,o,d,p){void 0===c&&(c=f.computeIsTrident());var g=e.dom.bounds(),h={},v=[];t.forEach(function(e){h[e.hash]=!1});for(var m,b=p.nextSibling;b;)m=b.getAttribute("cgHash"),h.hasOwnProperty(m)?h[m]=!0:v.push(b),b=b.nextSibling;v.forEach(function(e){return d.removeChild(e)}),t.forEach(function(t){h[t.hash]||d.appendChild(function(e,t,n,o,d){var p,g=t.shape,h=t.current,v=t.hash;if(g.piece)p=function(e,t,n,o){var a=u(t,o),s=o.width/8*(n.scale||1),l=n.color[0]+("knight"===n.role?"n":n.role[0]).toUpperCase();return i(r("image"),{className:n.role+" "+n.color,x:a[0]-s/2,y:a[1]-s/2,width:s,height:s,href:e+l+".svg"})}(e.drawable.pieces.baseUrl,a(f.key2pos(g.orig),e.orientation),g.piece,d);else{var m=a(f.key2pos(g.orig),e.orientation);if(g.orig&&g.dest){var b=n[g.brush];g.modifiers&&(b=s(b,g.modifiers)),p=function(e,t,n,o,a,s){var f=c?0:(a&&!o?20:10)/512*s.width,d=u(t,s),p=u(n,s),g=p[0]-d[0],h=p[1]-d[1],v=Math.atan2(h,g),m=Math.cos(v)*f,b=Math.sin(v)*f;return i(r("line"),{stroke:e.color,"stroke-width":function(t,n,r){return(e.lineWidth||10)*(n?.85:1)/512*r.width}(0,o,s),"stroke-linecap":"round","marker-end":c?void 0:"url(#arrowhead-"+e.key+")",opacity:l(e,o),x1:d[0],y1:d[1],x2:p[0]-m,y2:p[1]-b})}(b,m,a(f.key2pos(g.dest),e.orientation),h,o[g.dest]>1,d)}else p=function(e,t,n,o){var a=u(m,o),s=function(e){var t=o.width/512;return[3*t,4*t]}(),c=(o.width+o.height)/32;return i(r("circle"),{stroke:e.color,"stroke-width":s[n?0:1],fill:"none",opacity:l(e,n),cx:a[0],cy:a[1],r:c-s[1]/2})}(n[g.brush],0,h,d)}return p.setAttribute("cgHash",v),p}(e,t,n,o,g))})}(e,h,n.brushes,g,t,m)}}},{"./util":17}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.files=["a","b","c","d","e","f","g","h"],n.ranks=[1,2,3,4,5,6,7,8]},{}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./types");n.colors=["white","black"],n.invRanks=[8,7,6,5,4,3,2,1],n.allKeys=(o=Array.prototype).concat.apply(o,r.files.map(function(e){return r.ranks.map(function(t){return e+t})})),n.pos2key=function(e){return n.allKeys[8*e[0]+e[1]-9]},n.key2pos=function(e){return[e.charCodeAt(0)-96,e.charCodeAt(1)-48]},n.memo=function(e){var t,n=function(){return void 0===t&&(t=e()),t};return n.clear=function(){t=void 0},n},n.timer=function(){var e;return{start:function(){e=Date.now()},cancel:function(){e=void 0},stop:function(){if(!e)return 0;var t=Date.now()-e;return e=void 0,t}}},n.opposite=function(e){return"white"===e?"black":"white"},n.containsX=function(e,t){return void 0!==e&&-1!==e.indexOf(t)},n.distanceSq=function(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)},n.samePiece=function(e,t){return e.role===t.role&&e.color===t.color},n.computeIsTrident=function(){return window.navigator.userAgent.indexOf("Trident/")>-1};var o,i=function(e,t,n,r){return[(t?e[0]-1:8-e[0])*n,(t?8-e[1]:e[1]-1)*r]};n.posToTranslateAbs=function(e){var t=e.width/8,n=e.height/8;return function(e,r){return i(e,r,t,n)}},n.posToTranslateRel=function(e,t){return i(e,t,12.5,12.5)},n.translateAbs=function(e,t){e.style.transform="translate("+t[0]+"px,"+t[1]+"px)"},n.translateRel=function(e,t){e.style.left=t[0]+"%",e.style.top=t[1]+"%"},n.setVisible=function(e,t){e.style.visibility=t?"visible":"hidden"},n.eventPosition=function(e){return e.clientX||0===e.clientX?[e.clientX,e.clientY]:e.touches&&e.targetTouches[0]?[e.targetTouches[0].clientX,e.targetTouches[0].clientY]:void 0},n.isRightButton=function(e){return 2===e.buttons||2===e.button},n.createEl=function(e,t){var n=document.createElement(e);return t&&(n.className=t),n},n.raf=(window.requestAnimationFrame||window.setTimeout).bind(window)},{"./types":16}],18:[function(e,t,n){"use strict";function r(e,t){var n,r=o.createEl("coords",t);for(var i in e)(n=o.createEl("coord")).textContent=e[i],r.appendChild(n);return r}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./util"),i=e("./types"),a=e("./svg");n.default=function(e,t,n){e.innerHTML="",e.classList.add("cg-board-wrap"),o.colors.forEach(function(n){e.classList.toggle("orientation-"+n,t.orientation===n)}),e.classList.toggle("manipulable",!t.viewOnly);var s,l,u=o.createEl("div","cg-board");if(e.appendChild(u),t.drawable.visible&&n&&((s=a.createElement("svg")).appendChild(a.createElement("defs")),e.appendChild(s)),t.coordinates){var c="black"===t.orientation?" black":"";e.appendChild(r(i.ranks,"ranks"+c)),e.appendChild(r(i.files,"files"+c))}return n&&t.draggable.showGhost&&(l=o.createEl("piece","ghost"),o.setVisible(l,!1),e.appendChild(l)),{board:u,ghost:l,svg:s}}},{"./svg":15,"./types":16,"./util":17}]},{},[11])(11)}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.i18next=t()}(this,function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){var n;console&&console[e]&&(n=console)[e].apply(n,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))}},s=new(function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,e),this.init(n,r)}return e.prototype.init=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||a,this.options=t,this.debug=t.debug},e.prototype.setDebug=function(e){this.debug=e},e.prototype.log=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)},e.prototype.warn=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)},e.prototype.error=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")},e.prototype.deprecate=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)},e.prototype.forward=function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]=""+n+this.prefix+" "+e[0]),this.logger[t](e))},e.prototype.create=function(t){return new e(this.logger,n({prefix:this.prefix+":"+t+":"},this.options))},e}()),l=function(){function e(){t(this,e),this.observers={}}return e.prototype.on=function(e,t){var n=this;e.split(" ").forEach(function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})},e.prototype.off=function(e,t){var n=this;this.observers[e]&&this.observers[e].forEach(function(){if(t){var r=n.observers[e].indexOf(t);r>-1&&n.observers[e].splice(r,1)}else delete n.observers[e]})},e.prototype.emit=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&[].concat(this.observers[e]).forEach(function(e){e.apply(void 0,n)});this.observers["*"]&&[].concat(this.observers["*"]).forEach(function(t){var r;t.apply(t,(r=[e]).concat.apply(r,n))})},e}();function u(e){return null==e?"":""+e}function c(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function o(){return!e||"string"==typeof e}for(var i="string"!=typeof t?[].concat(t):t.split(".");i.length>1;){if(o())return{};var a=r(i.shift());!e[a]&&n&&(e[a]=new n),e=e[a]}return o()?{}:{obj:e,k:r(i.shift())}}function f(e,t,n){var r=c(e,t,Object);r.obj[r.k]=n}function d(e,t){var n=c(e,t),r=n.obj,o=n.k;if(r)return r[o]}function p(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function h(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,function(e){return g[e]}):e}var v=function(e){function i(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};t(this,i);var a=o(this,e.call(this));return a.data=n||{},a.options=r,a}return r(i,e),i.prototype.addNamespaces=function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)},i.prototype.removeNamespaces=function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)},i.prototype.getResource=function(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).keySeparator||this.options.keySeparator;void 0===r&&(r=".");var o=[e,t];return n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(r?n.split(r):n)),e.indexOf(".")>-1&&(o=e.split(".")),d(this.data,o)},i.prototype.addResource=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},i=this.options.keySeparator;void 0===i&&(i=".");var a=[e,t];n&&(a=a.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(r=t,t=(a=e.split("."))[1]),this.addNamespaces(t),f(this.data,a,r),o.silent||this.emit("added",e,t,n,r)},i.prototype.addResources=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var o in n)"string"==typeof n[o]&&this.addResource(e,t,o,n[o],{silent:!0});r.silent||this.emit("added",e,t,n)},i.prototype.addResourceBundle=function(e,t,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},s=[e,t];e.indexOf(".")>-1&&(o=r,r=t,t=(s=e.split("."))[1]),this.addNamespaces(t);var l=d(this.data,s)||{};o?function e(t,n,r){for(var o in n)o in t?"string"==typeof t[o]||t[o]instanceof String||"string"==typeof n[o]||n[o]instanceof String?r&&(t[o]=n[o]):e(t[o],n[o],r):t[o]=n[o];return t}(l,r,i):l=n({},l,r),f(this.data,s,l),a.silent||this.emit("added",e,t,r)},i.prototype.removeResourceBundle=function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)},i.prototype.hasResourceBundle=function(e,t){return void 0!==this.getResource(e,t)},i.prototype.getResourceBundle=function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?n({},this.getResource(e,t)):this.getResource(e,t)},i.prototype.toJSON=function(){return this.data},i}(l),m={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,o){var i=this;return e.forEach(function(e){i.processors[e]&&(t=i.processors[e].process(t,n,r,o))}),t}},b=function(i){function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,a);var r,l,u=o(this,i.call(this));return r=e,l=u,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector"].forEach(function(e){r[e]&&(l[e]=r[e])}),u.options=n,u.logger=s.create("translator"),u}return r(a,i),a.prototype.changeLanguage=function(e){e&&(this.language=e)},a.prototype.exists=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res},a.prototype.extractFromKey=function(e,t){var n=t.nsSeparator||this.options.nsSeparator;void 0===n&&(n=":");var r=t.keySeparator||this.options.keySeparator||".",o=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var i=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(i[0])>-1)&&(o=i.shift()),e=i.join(r)}return"string"==typeof o&&(o=[o]),{key:e,namespaces:o}},a.prototype.translate=function(t,r){var o=this;if("object"!==(void 0===r?"undefined":e(r))&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),r||(r={}),null==t||""===t)return"";"number"==typeof t&&(t=String(t)),"string"==typeof t&&(t=[t]);var i=r.keySeparator||this.options.keySeparator||".",a=this.extractFromKey(t[t.length-1],r),s=a.key,l=a.namespaces,u=l[l.length-1],c=r.lng||this.language,f=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&"cimode"===c.toLowerCase()){if(f){var d=r.nsSeparator||this.options.nsSeparator;return u+d+s}return s}var p=this.resolve(t,r),g=p&&p.res,h=p&&p.usedKey||s,v=Object.prototype.toString.apply(g),m=void 0!==r.joinArrays?r.joinArrays:this.options.joinArrays;if(g&&("string"!=typeof g&&"boolean"!=typeof g&&"number"!=typeof g)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(v)<0&&(!m||"[object Array]"!==v)){if(!r.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,g,r):"key '"+s+" ("+this.language+")' returned an object instead of string.";if(r.keySeparator||this.options.keySeparator){var b="[object Array]"===v?[]:{};for(var y in g)if(Object.prototype.hasOwnProperty.call(g,y)){var w=""+h+i+y;b[y]=this.translate(w,n({},r,{joinArrays:!1,ns:l})),b[y]===w&&(b[y]=g[y])}g=b}}else if(m&&"[object Array]"===v)(g=g.join(m))&&(g=this.extendTranslation(g,t,r));else{var x=!1,k=!1;this.isValidLookup(g)||void 0===r.defaultValue||(x=!0,g=r.defaultValue),this.isValidLookup(g)||(k=!0,g=s);var E=r.defaultValue&&r.defaultValue!==g&&this.options.updateMissing;if(k||x||E){this.logger.log(E?"updateKey":"missingKey",c,u,s,E?r.defaultValue:g);var C=[],O=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if("fallback"===this.options.saveMissingTo&&O&&O[0])for(var _=0;_<O.length;_++)C.push(O[_]);else"all"===this.options.saveMissingTo?C=this.languageUtils.toResolveHierarchy(r.lng||this.language):C.push(r.lng||this.language);var S=function(e,t){o.options.missingKeyHandler?o.options.missingKeyHandler(e,u,t,E?r.defaultValue:g,E,r):o.backendConnector&&o.backendConnector.saveMissing&&o.backendConnector.saveMissing(e,u,t,E?r.defaultValue:g,E,r),o.emit("missingKey",e,u,t,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&r.count?C.forEach(function(e){o.pluralResolver.getPluralFormsOfKey(e,s).forEach(function(t){return S([e],t)})}):S(C,s))}g=this.extendTranslation(g,t,r),k&&g===s&&this.options.appendNamespaceToMissingKey&&(g=u+":"+s),k&&this.options.parseMissingKeyHandler&&(g=this.options.parseMissingKeyHandler(g))}return g},a.prototype.extendTranslation=function(e,t,r){var o=this;r.interpolation&&this.interpolator.init(n({},r,{interpolation:n({},this.options.interpolation,r.interpolation)}));var i=r.replace&&"string"!=typeof r.replace?r.replace:r;this.options.interpolation.defaultVariables&&(i=n({},this.options.interpolation.defaultVariables,i)),e=this.interpolator.interpolate(e,i,r.lng||this.language),!1!==r.nest&&(e=this.interpolator.nest(e,function(){return o.translate.apply(o,arguments)},r)),r.interpolation&&this.interpolator.reset();var a=r.postProcess||this.options.postProcess,s="string"==typeof a?[a]:a;return null!=e&&s&&s.length&&!1!==r.applyPostProcessor&&(e=m.handle(s,e,t,r,this)),e},a.prototype.resolve=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0,o=void 0;return"string"==typeof e&&(e=[e]),e.forEach(function(e){if(!t.isValidLookup(r)){var i=t.extractFromKey(e,n),a=i.key;o=a;var s=i.namespaces;t.options.fallbackNS&&(s=s.concat(t.options.fallbackNS));var l=void 0!==n.count&&"string"!=typeof n.count,u=void 0!==n.context&&"string"==typeof n.context&&""!==n.context,c=n.lngs?n.lngs:t.languageUtils.toResolveHierarchy(n.lng||t.language);s.forEach(function(e){t.isValidLookup(r)||c.forEach(function(o){if(!t.isValidLookup(r)){var i=a,s=[i],c=void 0;l&&(c=t.pluralResolver.getSuffix(o,n.count)),l&&u&&s.push(i+c),u&&s.push(i+=""+t.options.contextSeparator+n.context),l&&s.push(i+=c);for(var f=void 0;f=s.pop();)t.isValidLookup(r)||(r=t.getResource(o,e,f,n))}})})}}),{res:r,usedKey:o}},a.prototype.isValidLookup=function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)},a.prototype.getResource=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.resourceStore.getResource(e,t,n,r)},a}(l);function y(e){return e.charAt(0).toUpperCase()+e.slice(1)}var w=function(){function e(n){t(this,e),this.options=n,this.whitelist=this.options.whitelist||!1,this.logger=s.create("languageUtils")}return e.prototype.getScriptPartFromCode=function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),this.formatLanguageCode(t.join("-")))},e.prototype.getLanguagePartFromCode=function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])},e.prototype.formatLanguageCode=function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map(function(e){return e.toLowerCase()}):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=y(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=y(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=y(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e},e.prototype.isWhitelisted=function(e){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist)&&(e=this.getLanguagePartFromCode(e)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(e)>-1},e.prototype.getFallbackCodes=function(e,t){if(!e)return[];if("string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e.default),n||[]},e.prototype.toResolveHierarchy=function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),o=[],i=function(e){e&&(n.isWhitelisted(e)?o.push(e):n.logger.warn("rejecting non-whitelisted language code: "+e))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):"string"==typeof e&&i(this.formatLanguageCode(e)),r.forEach(function(e){o.indexOf(e)<0&&i(n.formatLanguageCode(e))}),o},e}(),x=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","he","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21}],k={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0===e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)}};var E=function(){function e(n){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,e),this.languageUtils=n,this.options=o,this.logger=s.create("pluralResolver"),this.rules=(r={},x.forEach(function(e){e.lngs.forEach(function(t){r[t]={numbers:e.nr,plurals:k[e.fc]}})}),r)}return e.prototype.addRule=function(e,t){this.rules[e]=t},e.prototype.getRule=function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]},e.prototype.needsPlural=function(e){var t=this.getRule(e);return t&&t.numbers.length>1},e.prototype.getPluralFormsOfKey=function(e,t){var n=this,r=[],o=this.getRule(e);return o?(o.numbers.forEach(function(o){var i=n.getSuffix(e,o);r.push(""+t+i)}),r):r},e.prototype.getSuffix=function(e,t){var n=this,r=this.getRule(e);if(r){var o=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),i=r.numbers[o];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===i?i="plural":1===i&&(i=""));var a=function(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?"_plural_"+i.toString():a():"v2"===this.options.compatibilityJSON||2===r.numbers.length&&1===r.numbers[0]?a():2===r.numbers.length&&1===r.numbers[0]?a():this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString()}return this.logger.warn("no plural rule found for: "+e),""},e}(),C=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,e),this.logger=s.create("interpolator"),this.init(n,!0)}return e.prototype.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments[1]&&(this.options=e,this.format=e.interpolation&&e.interpolation.format||function(e){return e},this.escape=e.interpolation&&e.interpolation.escape||h),e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.prefix=t.prefix?p(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?p(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?p(t.nestingPrefix):t.nestingPrefixEscaped||p("$t("),this.nestingSuffix=t.nestingSuffix?p(t.nestingSuffix):t.nestingSuffixEscaped||p(")"),this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.resetRegExp()},e.prototype.reset=function(){this.options&&this.init(this.options)},e.prototype.resetRegExp=function(){var e=this.prefix+"(.+?)"+this.suffix;this.regexp=new RegExp(e,"g");var t=""+this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix;this.regexpUnescape=new RegExp(t,"g");var n=this.nestingPrefix+"(.+?)"+this.nestingSuffix;this.nestingRegexp=new RegExp(n,"g")},e.prototype.interpolate=function(e,t,n){var r=this,o=void 0,i=void 0,a=void 0;function s(e){return e.replace(/\$/g,"$$$$")}var l=function(e){if(e.indexOf(r.formatSeparator)<0)return d(t,e);var o=e.split(r.formatSeparator),i=o.shift().trim(),a=o.join(r.formatSeparator).trim();return r.format(d(t,i),a,n)};for(this.resetRegExp(),a=0;(o=this.regexpUnescape.exec(e))&&(i=l(o[1].trim()),e=e.replace(o[0],i),this.regexpUnescape.lastIndex=0,!(++a>=this.maxReplaces)););for(a=0;o=this.regexp.exec(e);){if("string"!=typeof(i=l(o[1].trim()))&&(i=u(i)),!i)if("function"==typeof this.options.missingInterpolationHandler){var c=this.options.missingInterpolationHandler(e,o);i="string"==typeof c?c:""}else this.logger.warn("missed to pass in variable "+o[1]+" for interpolating "+e),i="";if(i=this.escapeValue?s(this.escape(i)):s(i),e=e.replace(o[0],i),this.regexp.lastIndex=0,++a>=this.maxReplaces)break}return e},e.prototype.nest=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=void 0,i=void 0,a=n({},r);function s(e,t){if(e.indexOf(",")<0)return e;var r=e.split(",");e=r.shift();var o=r.join(",");o=(o=this.interpolate(o,a)).replace(/'/g,'"');try{a=JSON.parse(o),t&&(a=n({},t,a))}catch(t){this.logger.error("failed parsing options string in nesting for key "+e,t)}return e}for(a.applyPostProcessor=!1;o=this.nestingRegexp.exec(e);){if((i=t(s.call(this,o[1].trim(),a),a))&&o[0]===e&&"string"!=typeof i)return i;"string"!=typeof i&&(i=u(i)),i||(this.logger.warn("missed to resolve "+o[1]+" for nesting "+e),i=""),e=e.replace(o[0],i),this.regexp.lastIndex=0}return e},e}();var O=function(e){function a(n,r,i){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t(this,a);var u=o(this,e.call(this));return u.backend=n,u.store=r,u.languageUtils=i.languageUtils,u.options=l,u.logger=s.create("backendConnector"),u.state={},u.queue=[],u.backend&&u.backend.init&&u.backend.init(i,l.backend,l),u}return r(a,e),a.prototype.queueLoad=function(e,t,n){var r=this,o=[],i=[],a=[],s=[];return e.forEach(function(e){var n=!0;t.forEach(function(t){var a=e+"|"+t;r.store.hasResourceBundle(e,t)?r.state[a]=2:r.state[a]<0||(1===r.state[a]?i.indexOf(a)<0&&i.push(a):(r.state[a]=1,n=!1,i.indexOf(a)<0&&i.push(a),o.indexOf(a)<0&&o.push(a),s.indexOf(t)<0&&s.push(t)))}),n||a.push(e)}),(o.length||i.length)&&this.queue.push({pending:i,loaded:{},errors:[],callback:n}),{toLoad:o,pending:i,toLoadLanguages:a,toLoadNamespaces:s}},a.prototype.loaded=function(e,t,n){var r=this,o=e.split("|"),a=i(o,2),s=a[0],l=a[1];t&&this.emit("failedLoading",s,l,t),n&&this.store.addResourceBundle(s,l,n),this.state[e]=t?-1:2,this.queue.forEach(function(n){var o,i,a,u,f,d;o=n.loaded,i=l,u=c(o,[s],Object),f=u.obj,d=u.k,f[d]=f[d]||[],a&&(f[d]=f[d].concat(i)),a||f[d].push(i),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(r.emit("loaded",n.loaded),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.queue=this.queue.filter(function(e){return!e.done})},a.prototype.read=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:250,a=arguments[5];return e.length?this.backend[n](e,t,function(s,l){s&&l&&r<5?setTimeout(function(){o.read.call(o,e,t,n,r+1,2*i,a)},i):a(s,l)}):a(null,{})},a.prototype.load=function(e,t,r){var o=this;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();var a=n({},this.backend.options,this.options.backend);"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var s=this.queueLoad(e,t,r);if(!s.toLoad.length)return s.pending.length||r(),null;a.allowMultiLoading&&this.backend.readMulti?this.read(s.toLoadLanguages,s.toLoadNamespaces,"readMulti",null,null,function(e,t){e&&o.logger.warn("loading namespaces "+s.toLoadNamespaces.join(", ")+" for languages "+s.toLoadLanguages.join(", ")+" via multiloading failed",e),!e&&t&&o.logger.log("successfully loaded namespaces "+s.toLoadNamespaces.join(", ")+" for languages "+s.toLoadLanguages.join(", ")+" via multiloading",t),s.toLoad.forEach(function(n){var r=n.split("|"),a=i(r,2),s=a[0],l=a[1],u=d(t,[s,l]);if(u)o.loaded(n,e,u);else{var c="loading namespace "+l+" for language "+s+" via multiloading failed";o.loaded(n,c),o.logger.error(c)}})}):s.toLoad.forEach(function(e){o.loadOne(e)})},a.prototype.reload=function(e,t){var r=this;this.backend||this.logger.warn("No backend was added via i18next.use. Will not load resources.");var o=n({},this.backend.options,this.options.backend);"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]),o.allowMultiLoading&&this.backend.readMulti?this.read(e,t,"readMulti",null,null,function(n,o){n&&r.logger.warn("reloading namespaces "+t.join(", ")+" for languages "+e.join(", ")+" via multiloading failed",n),!n&&o&&r.logger.log("successfully reloaded namespaces "+t.join(", ")+" for languages "+e.join(", ")+" via multiloading",o),e.forEach(function(e){t.forEach(function(t){var i=d(o,[e,t]);if(i)r.loaded(e+"|"+t,n,i);else{var a="reloading namespace "+t+" for language "+e+" via multiloading failed";r.loaded(e+"|"+t,a),r.logger.error(a)}})})}):e.forEach(function(e){t.forEach(function(t){r.loadOne(e+"|"+t,"re")})})},a.prototype.loadOne=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),o=i(r,2),a=o[0],s=o[1];this.read(a,s,"read",null,null,function(r,o){r&&t.logger.warn(n+"loading namespace "+s+" for language "+a+" failed",r),!r&&o&&t.logger.log(n+"loaded namespace "+s+" for language "+a,o),t.loaded(e,r,o)})},a.prototype.saveMissing=function(e,t,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.backend&&this.backend.create&&this.backend.create(e,t,r,o,null,n({},a,{isUpdate:i})),e&&e[0]&&this.store.addResource(e[0],t,r,o)},a}(l),_=function(e){function i(n,r,a){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t(this,i);var u=o(this,e.call(this));return u.cache=n,u.store=r,u.services=a,u.options=l,u.logger=s.create("cacheConnector"),u.cache&&u.cache.init&&u.cache.init(a,l.cache,l),u}return r(i,e),i.prototype.load=function(e,t,r){var o=this;if(!this.cache)return r&&r();var i=n({},this.cache.options,this.options.cache),a="string"==typeof e?this.services.languageUtils.toResolveHierarchy(e):e;i.enabled?this.cache.load(a,function(e,t){if(e&&o.logger.error("loading languages "+a.join(", ")+" from cache failed",e),t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))for(var i in t[n])if(Object.prototype.hasOwnProperty.call(t[n],i)&&"i18nStamp"!==i){var s=t[n][i];s&&o.store.addResourceBundle(n,i,s)}r&&r()}):r&&r()},i.prototype.save=function(){this.cache&&this.options.cache&&this.options.cache.enabled&&this.cache.save(this.store.data)},i}(l);function S(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e}function A(){}return new(function(i){function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];t(this,a);var r=o(this,i.call(this));if(r.options=S(e),r.services={},r.logger=s,r.modules={external:[]},n&&!r.isInitialized&&!e.isClone){var l;if(!r.options.initImmediate)return l=r.init(e,n),o(r,l);setTimeout(function(){r.init(e,n)},0)}return r}return r(a,i),a.prototype.init=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1];function o(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(r=t,t={}),this.options=n({},{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};return e[1]&&(t.defaultValue=e[1]),e[2]&&(t.tDescription=e[2]),t},interpolation:{escapeValue:!0,format:function(e,t,n){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",maxReplaces:1e3}},this.options,S(t)),this.format=this.options.interpolation.format,r||(r=A),!this.options.isClone){this.modules.logger?s.init(o(this.modules.logger),this.options):s.init(null,this.options);var i=new w(this.options);this.store=new v(this.options.resources,this.options);var a=this.services;a.logger=s,a.resourceStore=this.store,a.resourceStore.on("added removed",function(e,t){a.cacheConnector.save()}),a.languageUtils=i,a.pluralResolver=new E(i,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),a.interpolator=new C(this.options),a.backendConnector=new O(o(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.emit.apply(e,[t].concat(r))}),a.backendConnector.on("loaded",function(e){a.cacheConnector.save()}),a.cacheConnector=new _(o(this.modules.cache),a.resourceStore,a,this.options),a.cacheConnector.on("*",function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.emit.apply(e,[t].concat(r))}),this.modules.languageDetector&&(a.languageDetector=o(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.translator=new b(this.services,this.options),this.translator.on("*",function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.emit.apply(e,[t].concat(r))}),this.modules.external.forEach(function(t){t.init&&t.init(e)})}["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle"].forEach(function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}});var l=function(){e.changeLanguage(e.options.lng,function(t,n){e.isInitialized=!0,e.logger.log("initialized",e.options),e.emit("initialized",e.options),r(t,n)})};return this.options.resources||!this.options.initImmediate?l():setTimeout(l,0),this},a.prototype.loadResources=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;if(this.options.resources)t(null);else{if(this.language&&"cimode"===this.language.toLowerCase())return t();var n=[],r=function(t){t&&e.services.languageUtils.toResolveHierarchy(t).forEach(function(e){n.indexOf(e)<0&&n.push(e)})};if(this.language)r(this.language);else this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(function(e){return r(e)});this.options.preload&&this.options.preload.forEach(function(e){return r(e)}),this.services.cacheConnector.load(n,this.options.ns,function(){e.services.backendConnector.load(n,e.options.ns,t)})}},a.prototype.reloadResources=function(e,t){e||(e=this.languages),t||(t=this.options.ns),this.services.backendConnector.reload(e,t)},a.prototype.use=function(e){return"backend"===e.type&&(this.modules.backend=e),"cache"===e.type&&(this.modules.cache=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"postProcessor"===e.type&&m.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this},a.prototype.changeLanguage=function(e,t){var n=this,r=function(e){e&&(n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e),n.translator.language||n.translator.changeLanguage(e),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(e)),n.loadResources(function(r){!function(e,r){n.translator.changeLanguage(r),r&&(n.emit("languageChanged",r),n.logger.log("languageChanged",r)),t&&t(e,function(){return n.t.apply(n,arguments)})}(r,e)})};e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(r):r(e):r(this.services.languageDetector.detect())},a.prototype.getFixedT=function(t,r){var o=this,i=function t(r,i){for(var a=arguments.length,s=Array(a>2?a-2:0),l=2;l<a;l++)s[l-2]=arguments[l];var u=n({},i);return"object"!==(void 0===i?"undefined":e(i))&&(u=o.options.overloadTranslationOptionHandler([r,i].concat(s))),u.lng=u.lng||t.lng,u.lngs=u.lngs||t.lngs,u.ns=u.ns||t.ns,o.t(r,u)};return"string"==typeof t?i.lng=t:i.lngs=t,i.ns=r,i},a.prototype.t=function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)},a.prototype.exists=function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)},a.prototype.setDefaultNamespace=function(e){this.options.defaultNS=e},a.prototype.loadNamespaces=function(e,t){var n=this;if(!this.options.ns)return t&&t();"string"==typeof e&&(e=[e]),e.forEach(function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)}),this.loadResources(t)},a.prototype.loadLanguages=function(e,t){"string"==typeof e&&(e=[e]);var n=this.options.preload||[],r=e.filter(function(e){return n.indexOf(e)<0});if(!r.length)return t();this.options.preload=n.concat(r),this.loadResources(t)},a.prototype.dir=function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"},a.prototype.createInstance=function(){return new a(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])},a.prototype.cloneInstance=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A,o=n({},this.options,t,{isClone:!0}),i=new a(o);return["store","services","language"].forEach(function(t){i[t]=e[t]}),i.translator=new b(i.services,i.options),i.translator.on("*",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e].concat(n))}),i.init(o,r),i.translator.options=i.options,i},a}(l))}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.i18nextXHRBackend=t()}(this,function(){"use strict";var e=[],t=e.forEach,n=e.slice;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(t&&"object"===(void 0===t?"undefined":r(t))){var n="",o=encodeURIComponent;for(var i in t)n+="&"+o(i)+"="+o(t[i]);if(!n)return e;e=e+(-1!==e.indexOf("?")?"&":"?")+n.slice(1)}return e}function i(e,t,n,i,a){i&&"object"===(void 0===i?"undefined":r(i))&&(a||(i._t=new Date),i=o("",i).slice(1)),t.queryStringParams&&(e=o(e,t.queryStringParams));try{var s;(s=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0")).open(i?"POST":"GET",e,1),t.crossDomain||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.withCredentials=!!t.withCredentials,i&&s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.overrideMimeType&&s.overrideMimeType("application/json");var l=t.customHeaders;if(l)for(var u in l)s.setRequestHeader(u,l[u]);s.onreadystatechange=function(){s.readyState>3&&n&&n(s.responseText,s)},s.send(i)}catch(e){console&&console.log(e)}}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init(t,n),this.type="backend"}return a(e,[{key:"init",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=e,this.options=function(e){return t.call(n.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e}(r,this.options||{},{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:i})}},{key:"readMulti",value:function(e,t,n){var r=this.options.loadPath;"function"==typeof this.options.loadPath&&(r=this.options.loadPath(e,t));var o=this.services.interpolator.interpolate(r,{lng:e.join("+"),ns:t.join("+")});this.loadUrl(o,n)}},{key:"read",value:function(e,t,n){var r=this.options.loadPath;"function"==typeof this.options.loadPath&&(r=this.options.loadPath([e],[t]));var o=this.services.interpolator.interpolate(r,{lng:e,ns:t});this.loadUrl(o,n)}},{key:"loadUrl",value:function(e,t){var n=this;this.options.ajax(e,this.options,function(r,o){if(o.status>=500&&o.status<600)return t("failed loading "+e,!0);if(o.status>=400&&o.status<500)return t("failed loading "+e,!1);var i=void 0,a=void 0;try{i=n.options.parse(r,e)}catch(t){a="failed parsing "+e+" to json"}if(a)return t(a,!1);t(null,i)})}},{key:"create",value:function(e,t,n,r){var o=this;"string"==typeof e&&(e=[e]);var i={};i[n]=r||"",e.forEach(function(e){var n=o.services.interpolator.interpolate(o.options.addPath,{lng:e,ns:t});o.options.ajax(n,o.options,function(e,t){},i)})}}]),e}();return s.type="backend",s}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.i18nextLocalStorageCache=t()}(this,function(){"use strict";var e=[],t=e.forEach,n=e.slice;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(e,t){if(window.localStorage)try{window.localStorage.setItem(e,t)}catch(e){}},i=function(e,t){if(window.localStorage)try{return window.localStorage.getItem(e,t)}catch(e){}};var a=function(){function e(t){var n,r,o,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init(t,a),this.type="cache",this.debouncedStore=(n=this.store,r=1e4,function(){var e=this,t=arguments,a=o&&!i;clearTimeout(i),i=setTimeout(function(){i=null,o||n.apply(e,t)},r),a&&n.apply(e,t)})}return r(e,[{key:"init",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=e,this.options=function(e){return t.call(n.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e}(r,this.options||{},{enabled:!1,prefix:"i18next_res_",expirationTime:6048e5,versions:{}})}},{key:"load",value:function(e,t){var n=this,r={},o=(new Date).getTime();if(!window.localStorage||!e.length)return t(null,null);var a=e.length;e.forEach(function(e){var s=i(n.options.prefix+e);s&&(s=JSON.parse(s)).i18nStamp&&s.i18nStamp+n.options.expirationTime>o&&n.options.versions[e]===s.i18nVersion&&(delete s.i18nVersion,r[e]=s),0===(a-=1)&&t(null,r)})}},{key:"store",value:function(e){var t=e;if(window.localStorage)for(var n in t)t[n].i18nStamp=(new Date).getTime(),this.options.versions[n]&&(t[n].i18nVersion=this.options.versions[n]),o(this.options.prefix+n,JSON.stringify(t[n]))}},{key:"save",value:function(e){this.debouncedStore(e)}}]),e}();return a.type="cache",a}),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Timer=t()}(this,function(){function e(e){if("string"==typeof e){isNaN(parseInt(e,10))&&(e="1"+e);var t=e.replace(/[^a-z0-9\.]/g,"").match(/(?:(\d+(?:\.\d+)?)(?:days?|d))?(?:(\d+(?:\.\d+)?)(?:hours?|hrs?|h))?(?:(\d+(?:\.\d+)?)(?:minutes?|mins?|m\b))?(?:(\d+(?:\.\d+)?)(?:seconds?|secs?|s))?(?:(\d+(?:\.\d+)?)(?:milliseconds?|ms))?/);if(t[0])return 864e5*parseFloat(t[1]||0)+36e5*parseFloat(t[2]||0)+6e4*parseFloat(t[3]||0)+1e3*parseFloat(t[4]||0)+parseInt(t[5]||0,10);if(!isNaN(parseInt(e,10)))return parseInt(e,10)}return"number"==typeof e?e:0}function t(n){if(this instanceof t==!1)return new t(n);this._notifications=[],this._resolution=e(n)||1e3,this._running=!1,this._ticks=0,this._timer=null,this._drift=0}return t.prototype={start:function(){var e=this;return this._running||(this._running=!this._running,setTimeout(function t(){e._ticks++;for(var n=0,r=e._notifications.length;n<r;n++)e._notifications[n]&&e._ticks%e._notifications[n].ticks==0&&e._notifications[n].callback.call(e._notifications[n],{ticks:e._ticks,resolution:e._resolution});e._running&&(e._timer=setTimeout(t,e._resolution+e._drift),e._drift=0)},this._resolution+this._drift),this._drift=0),this},stop:function(){return this._running&&(this._running=!this._running,clearTimeout(this._timer)),this},reset:function(){return this.stop(),this._ticks=0,this},clear:function(){return this.reset(),this._notifications=[],this},ticks:function(){return this._ticks},resolution:function(){return this._resolution},running:function(){return this._running},bind:function(t,n){if(t&&n){var r=(o=e(t),i=this._resolution,parseInt(o/i,10)||1);this._notifications.push({ticks:r,callback:n})}var o,i;return this},unbind:function(e){if(e)for(var t=0,n=this._notifications.length;t<n;t++)this._notifications[t]&&this._notifications[t].callback===e&&this._notifications.splice(t,1);else this._notifications=[];return this},drift:function(e){return this._drift=e,this}},t.prototype.every=t.prototype.bind,t.prototype.after=function(e,n){var r=this;return t.prototype.bind.call(r,e,function e(){t.prototype.unbind.call(r,e),n.apply(this,arguments)}),this},t}),function(){"use strict";var e=window,t=document;function n(){if(!("scrollBehavior"in t.documentElement.style&&!0!==e.__forceSmoothScrollPolyfill__)){var n,r=e.HTMLElement||e.Element,o=468,i=(n=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(n)?1:0),a={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:r.prototype.scroll||l,scrollIntoView:r.prototype.scrollIntoView},s=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now;e.scroll=e.scrollTo=function(){void 0!==arguments[0]&&(!0!==u(arguments[0])?g.call(e,t.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset):a.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){void 0!==arguments[0]&&(u(arguments[0])?a.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):g.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},r.prototype.scroll=r.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==u(arguments[0])){var e=arguments[0].left,t=arguments[0].top;g.call(this,this,void 0===e?this.scrollLeft:~~e,void 0===t?this.scrollTop:~~t)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value couldn't be converted");a.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},r.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==u(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):a.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},r.prototype.scrollIntoView=function(){if(!0!==u(arguments[0])){var n=function(e){var n;do{n=(e=e.parentNode)===t.body}while(!1===n&&!1===d(e));return n=null,e}(this),r=n.getBoundingClientRect(),o=this.getBoundingClientRect();n!==t.body?(g.call(this,n,n.scrollLeft+o.left-r.left,n.scrollTop+o.top-r.top),"fixed"!==e.getComputedStyle(n).position&&e.scrollBy({left:r.left,top:r.top,behavior:"smooth"})):e.scrollBy({left:o.left,top:o.top,behavior:"smooth"})}else a.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function l(e,t){this.scrollLeft=e,this.scrollTop=t}function u(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function c(e,t){return"Y"===t?e.clientHeight+i<e.scrollHeight:"X"===t?e.clientWidth+i<e.scrollWidth:void 0}function f(t,n){var r=e.getComputedStyle(t,null)["overflow"+n];return"auto"===r||"scroll"===r}function d(e){var t=c(e,"Y")&&f(e,"Y"),n=c(e,"X")&&f(e,"X");return t||n}function p(t){var n,r,i,a,l=(s()-t.startTime)/o;a=l=l>1?1:l,n=.5*(1-Math.cos(Math.PI*a)),r=t.startX+(t.x-t.startX)*n,i=t.startY+(t.y-t.startY)*n,t.method.call(t.scrollable,r,i),r===t.x&&i===t.y||e.requestAnimationFrame(p.bind(e,t))}function g(n,r,o){var i,u,c,f,d=s();n===t.body?(i=e,u=e.scrollX||e.pageXOffset,c=e.scrollY||e.pageYOffset,f=a.scroll):(i=n,u=n.scrollLeft,c=n.scrollTop,f=l),p({scrollable:i,method:f,startTime:d,startX:u,startY:c,x:r,y:o})}}"object"==typeof exports?module.exports={polyfill:n}:n()}(),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.swal=t():e.swal=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="swal-button";t.CLASS_NAMES={MODAL:"swal-modal",OVERLAY:"swal-overlay",SHOW_MODAL:"swal-overlay--show-modal",MODAL_TITLE:"swal-title",MODAL_TEXT:"swal-text",ICON:"swal-icon",ICON_CUSTOM:"swal-icon--custom",CONTENT:"swal-content",FOOTER:"swal-footer",BUTTON_CONTAINER:"swal-button-container",BUTTON:r,CONFIRM_BUTTON:r+"--confirm",CANCEL_BUTTON:r+"--cancel",DANGER_BUTTON:r+"--danger",BUTTON_LOADING:r+"--loading",BUTTON_LOADER:r+"__loader"},t.default=t.CLASS_NAMES},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNode=function(e){var t="."+e;return document.querySelector(t)},t.stringToNode=function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild},t.insertAfter=function(e,t){var n=t.nextSibling;t.parentNode.insertBefore(e,n)},t.removeNode=function(e){e.parentElement.removeChild(e)},t.throwErr=function(e){throw"SweetAlert: "+(e=e.replace(/ +(?= )/g,"")).trim()},t.isPlainObject=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype},t.ordinalSuffixOf=function(e){var t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(25));var o=n(26);t.overlayMarkup=o.default,r(n(27)),r(n(28)),r(n(29));var i=n(0),a=i.default.MODAL_TITLE,s=i.default.MODAL_TEXT,l=i.default.ICON,u=i.default.FOOTER;t.iconMarkup='\n  <div class="'+l+'"></div>',t.titleMarkup='\n  <div class="'+a+'"></div>\n',t.textMarkup='\n  <div class="'+s+'"></div>',t.footerMarkup='\n  <div class="'+u+'"></div>\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.CONFIRM_KEY="confirm",t.CANCEL_KEY="cancel";var o={visible:!0,text:null,value:null,className:"",closeModal:!0},i=Object.assign({},o,{visible:!1,text:"Cancel",value:null}),a=Object.assign({},o,{text:"OK",value:!0});t.defaultButtonList={cancel:i,confirm:a};var s=function(e){switch(e){case t.CONFIRM_KEY:return a;case t.CANCEL_KEY:return i;default:var n=e.charAt(0).toUpperCase()+e.slice(1);return Object.assign({},o,{text:n,value:e})}},l=function(e,t){var n=s(e);return!0===t?Object.assign({},n,{visible:!0}):"string"==typeof t?Object.assign({},n,{visible:!0,text:t}):r.isPlainObject(t)?Object.assign({visible:!0},n,t):Object.assign({},n,{visible:!1})},u=function(e){var n={};switch(e.length){case 1:n[t.CANCEL_KEY]=Object.assign({},i,{visible:!1});break;case 2:n[t.CANCEL_KEY]=l(t.CANCEL_KEY,e[0]),n[t.CONFIRM_KEY]=l(t.CONFIRM_KEY,e[1]);break;default:r.throwErr("Invalid number of 'buttons' in array ("+e.length+").\n      If you want more than 2 buttons, you need to use an object!")}return n};t.getButtonListOpts=function(e){var n=t.defaultButtonList;return"string"==typeof e?n[t.CONFIRM_KEY]=l(t.CONFIRM_KEY,e):Array.isArray(e)?n=u(e):r.isPlainObject(e)?n=function(e){for(var t={},n=0,r=Object.keys(e);n<r.length;n++){var o=r[n],a=e[o],s=l(o,a);t[o]=s}return t.cancel||(t.cancel=i),t}(e):!0===e?n=u([!0,!0]):!1===e?n=u([!1,!1]):void 0===e&&(n=t.defaultButtonList),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(2),i=n(0),a=i.default.MODAL,s=i.default.OVERLAY,l=n(30),u=n(31),c=n(32),f=n(33);t.injectElIntoModal=function(e){var t=r.getNode(a),n=r.stringToNode(e);return t.appendChild(n),n};var d=function(e,t){!function(e){e.className=a,e.textContent=""}(e);var n=t.className;n&&e.classList.add(n)};t.initModalContent=function(e){var t=r.getNode(a);d(t,e),l.default(e.icon),u.initTitle(e.title),u.initText(e.text),f.default(e.content),c.default(e.buttons,e.dangerMode)};t.default=function(){var e=r.getNode(s),t=r.stringToNode(o.modalMarkup);e.appendChild(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o={isOpen:!1,promise:null,actions:{},timer:null},i=Object.assign({},o);t.resetState=function(){i=Object.assign({},o)},t.setActionValue=function(e){if("string"==typeof e)return a(r.CONFIRM_KEY,e);for(var t in e)a(t,e[t])};var a=function(e,t){i.actions[e]||(i.actions[e]={}),Object.assign(i.actions[e],{value:t})};t.setActionOptionsFor=function(e,t){var n=(void 0===t?{}:t).closeModal,r=void 0===n||n;Object.assign(i.actions[e],{closeModal:r})},t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(3),i=n(0),a=i.default.OVERLAY,s=i.default.SHOW_MODAL,l=i.default.BUTTON,u=i.default.BUTTON_LOADING,c=n(5);t.openModal=function(){r.getNode(a).classList.add(s),c.default.isOpen=!0};t.onAction=function(e){void 0===e&&(e=o.CANCEL_KEY);var t=c.default.actions[e],n=t.value;if(!1===t.closeModal){var i=l+"--"+e;r.getNode(i).classList.add(u)}else r.getNode(a).classList.remove(s),c.default.isOpen=!1;c.default.promise.resolve(n)},t.getState=function(){var e=Object.assign({},c.default);return delete e.promise,delete e.timer,e},t.stopLoading=function(){for(var e=document.querySelectorAll("."+l),t=0;t<e.length;t++)e[t].classList.remove(u)}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(t){e.exports=t.sweetAlert=n(9)}).call(t,n(7))},function(e,t,n){(function(t){e.exports=t.swal=n(10)}).call(t,n(7))},function(e,t,n){"undefined"!=typeof window&&n(11),n(16);var r=n(23).default;e.exports=r},function(e,t,n){var r=n(12);"string"==typeof r&&(r=[[e.i,r,""]]);var o={insertAt:"top",transform:void 0};n(14)(r,o),r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(13)(void 0)).push([e.i,'.swal-icon--error{border-color:#f27474;-webkit-animation:animateErrorIcon .5s;animation:animateErrorIcon .5s}.swal-icon--error__x-mark{position:relative;display:block;-webkit-animation:animateXMark .5s;animation:animateXMark .5s}.swal-icon--error__line{position:absolute;height:5px;width:47px;background-color:#f27474;display:block;top:37px;border-radius:2px}.swal-icon--error__line--left{-webkit-transform:rotate(45deg);transform:rotate(45deg);left:17px}.swal-icon--error__line--right{-webkit-transform:rotate(-45deg);transform:rotate(-45deg);right:16px}@-webkit-keyframes animateErrorIcon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}to{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);opacity:1}}@keyframes animateErrorIcon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}to{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);opacity:1}}@-webkit-keyframes animateXMark{0%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}50%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}80%{-webkit-transform:scale(1.15);transform:scale(1.15);margin-top:-6px}to{-webkit-transform:scale(1);transform:scale(1);margin-top:0;opacity:1}}@keyframes animateXMark{0%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}50%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}80%{-webkit-transform:scale(1.15);transform:scale(1.15);margin-top:-6px}to{-webkit-transform:scale(1);transform:scale(1);margin-top:0;opacity:1}}.swal-icon--warning{border-color:#f8bb86;-webkit-animation:pulseWarning .75s infinite alternate;animation:pulseWarning .75s infinite alternate}.swal-icon--warning__body{width:5px;height:47px;top:10px;border-radius:2px;margin-left:-2px}.swal-icon--warning__body,.swal-icon--warning__dot{position:absolute;left:50%;background-color:#f8bb86}.swal-icon--warning__dot{width:7px;height:7px;border-radius:50%;margin-left:-4px;bottom:-11px}@-webkit-keyframes pulseWarning{0%{border-color:#f8d486}to{border-color:#f8bb86}}@keyframes pulseWarning{0%{border-color:#f8d486}to{border-color:#f8bb86}}.swal-icon--success{border-color:#a5dc86}.swal-icon--success:after,.swal-icon--success:before{content:"";border-radius:50%;position:absolute;width:60px;height:120px;background:#fff;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.swal-icon--success:before{border-radius:120px 0 0 120px;top:-7px;left:-33px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:60px 60px;transform-origin:60px 60px}.swal-icon--success:after{border-radius:0 120px 120px 0;top:-11px;left:30px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:0 60px;transform-origin:0 60px;-webkit-animation:rotatePlaceholder 4.25s ease-in;animation:rotatePlaceholder 4.25s ease-in}.swal-icon--success__ring{width:80px;height:80px;border:4px solid hsla(98,55%,69%,.2);border-radius:50%;box-sizing:content-box;position:absolute;left:-4px;top:-4px;z-index:2}.swal-icon--success__hide-corners{width:5px;height:90px;background-color:#fff;padding:1px;position:absolute;left:28px;top:8px;z-index:1;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.swal-icon--success__line{height:5px;background-color:#a5dc86;display:block;border-radius:2px;position:absolute;z-index:2}.swal-icon--success__line--tip{width:25px;left:14px;top:46px;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-animation:animateSuccessTip .75s;animation:animateSuccessTip .75s}.swal-icon--success__line--long{width:47px;right:8px;top:38px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-animation:animateSuccessLong .75s;animation:animateSuccessLong .75s}@-webkit-keyframes rotatePlaceholder{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}to{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@keyframes rotatePlaceholder{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}to{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@-webkit-keyframes animateSuccessTip{0%{width:0;left:1px;top:19px}54%{width:0;left:1px;top:19px}70%{width:50px;left:-8px;top:37px}84%{width:17px;left:21px;top:48px}to{width:25px;left:14px;top:45px}}@keyframes animateSuccessTip{0%{width:0;left:1px;top:19px}54%{width:0;left:1px;top:19px}70%{width:50px;left:-8px;top:37px}84%{width:17px;left:21px;top:48px}to{width:25px;left:14px;top:45px}}@-webkit-keyframes animateSuccessLong{0%{width:0;right:46px;top:54px}65%{width:0;right:46px;top:54px}84%{width:55px;right:0;top:35px}to{width:47px;right:8px;top:38px}}@keyframes animateSuccessLong{0%{width:0;right:46px;top:54px}65%{width:0;right:46px;top:54px}84%{width:55px;right:0;top:35px}to{width:47px;right:8px;top:38px}}.swal-icon--info{border-color:#c9dae1}.swal-icon--info:before{width:5px;height:29px;bottom:17px;border-radius:2px;margin-left:-2px}.swal-icon--info:after,.swal-icon--info:before{content:"";position:absolute;left:50%;background-color:#c9dae1}.swal-icon--info:after{width:7px;height:7px;border-radius:50%;margin-left:-3px;top:19px}.swal-icon{width:80px;height:80px;border-width:4px;border-style:solid;border-radius:50%;padding:0;position:relative;box-sizing:content-box;margin:20px auto}.swal-icon:first-child{margin-top:32px}.swal-icon--custom{width:auto;height:auto;max-width:100%;border:none;border-radius:0}.swal-icon img{max-width:100%;max-height:100%}.swal-title{color:rgba(0,0,0,.65);font-weight:600;text-transform:none;position:relative;display:block;padding:13px 16px;font-size:27px;line-height:normal;text-align:center;margin-bottom:0}.swal-title:first-child{margin-top:26px}.swal-title:not(:first-child){padding-bottom:0}.swal-title:not(:last-child){margin-bottom:13px}.swal-text{font-size:16px;position:relative;float:none;line-height:normal;vertical-align:top;text-align:left;display:inline-block;margin:0;padding:0 10px;font-weight:400;color:rgba(0,0,0,.64);max-width:calc(100% - 20px);overflow-wrap:break-word;box-sizing:border-box}.swal-text:first-child{margin-top:45px}.swal-text:last-child{margin-bottom:45px}.swal-footer{text-align:right;padding-top:13px;margin-top:13px;padding:13px 16px;border-radius:inherit;border-top-left-radius:0;border-top-right-radius:0}.swal-button-container{margin:5px;display:inline-block;position:relative}.swal-button{background-color:#7cd1f9;color:#fff;border:none;box-shadow:none;border-radius:5px;font-weight:600;font-size:14px;padding:10px 24px;margin:0;cursor:pointer}.swal-button[not:disabled]:hover{background-color:#78cbf2}.swal-button:active{background-color:#70bce0}.swal-button:focus{outline:none;box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(43,114,165,.29)}.swal-button[disabled]{opacity:.5;cursor:default}.swal-button::-moz-focus-inner{border:0}.swal-button--cancel{color:#555;background-color:#efefef}.swal-button--cancel[not:disabled]:hover{background-color:#e8e8e8}.swal-button--cancel:active{background-color:#d7d7d7}.swal-button--cancel:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(116,136,150,.29)}.swal-button--danger{background-color:#e64942}.swal-button--danger[not:disabled]:hover{background-color:#df4740}.swal-button--danger:active{background-color:#cf423b}.swal-button--danger:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(165,43,43,.29)}.swal-content{padding:0 20px;margin-top:20px;font-size:medium}.swal-content:last-child{margin-bottom:20px}.swal-content__input,.swal-content__textarea{-webkit-appearance:none;background-color:#fff;border:none;font-size:14px;display:block;box-sizing:border-box;width:100%;border:1px solid rgba(0,0,0,.14);padding:10px 13px;border-radius:2px;transition:border-color .2s}.swal-content__input:focus,.swal-content__textarea:focus{outline:none;border-color:#6db8ff}.swal-content__textarea{resize:vertical}.swal-button--loading{color:transparent}.swal-button--loading~.swal-button__loader{opacity:1}.swal-button__loader{position:absolute;height:auto;width:43px;z-index:2;left:50%;top:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);text-align:center;pointer-events:none;opacity:0}.swal-button__loader div{display:inline-block;float:none;vertical-align:baseline;width:9px;height:9px;padding:0;border:none;margin:2px;opacity:.4;border-radius:7px;background-color:hsla(0,0%,100%,.9);transition:background .2s;-webkit-animation:swal-loading-anim 1s infinite;animation:swal-loading-anim 1s infinite}.swal-button__loader div:nth-child(3n+2){-webkit-animation-delay:.15s;animation-delay:.15s}.swal-button__loader div:nth-child(3n+3){-webkit-animation-delay:.3s;animation-delay:.3s}@-webkit-keyframes swal-loading-anim{0%{opacity:.4}20%{opacity:.4}50%{opacity:1}to{opacity:.4}}@keyframes swal-loading-anim{0%{opacity:.4}20%{opacity:.4}50%{opacity:1}to{opacity:.4}}.swal-overlay{position:fixed;top:0;bottom:0;left:0;right:0;text-align:center;font-size:0;overflow-y:auto;background-color:rgba(0,0,0,.4);z-index:10000;pointer-events:none;opacity:0;transition:opacity .3s}.swal-overlay:before{content:" ";display:inline-block;vertical-align:middle;height:100%}.swal-overlay--show-modal{opacity:1;pointer-events:auto}.swal-overlay--show-modal .swal-modal{opacity:1;pointer-events:auto;box-sizing:border-box;-webkit-animation:showSweetAlert .3s;animation:showSweetAlert .3s;will-change:transform}.swal-modal{width:478px;opacity:0;pointer-events:none;background-color:#fff;text-align:center;border-radius:5px;position:static;margin:20px auto;display:inline-block;vertical-align:middle;-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;z-index:10001;transition:opacity .2s,-webkit-transform .3s;transition:transform .3s,opacity .2s;transition:transform .3s,opacity .2s,-webkit-transform .3s}@media (max-width:500px){.swal-modal{width:calc(100% - 20px)}}@-webkit-keyframes showSweetAlert{0%{-webkit-transform:scale(1);transform:scale(1)}1%{-webkit-transform:scale(.5);transform:scale(.5)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes showSweetAlert{0%{-webkit-transform:scale(1);transform:scale(1)}1%{-webkit-transform:scale(.5);transform:scale(.5)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}',""])},function(e,t){function n(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r);return[n].concat(r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"})).concat([o]).join("\n")}return[n].join("\n")}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=d[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(c(r.parts[i],t))}else{var a=[];for(i=0;i<r.parts.length;i++)a.push(c(r.parts[i],t));d[r.id]={id:r.id,refs:1,parts:a}}}}function o(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function i(e,t){var n=g(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=m[m.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),m.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=m.indexOf(e);t>=0&&m.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",u(t,e.attrs),i(e,t),t}function l(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",u(t,e.attrs),i(e,t),t}function u(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function c(e,t){var n,r,o,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var u=v++;n=h||(h=s(t)),r=f.bind(null,n,u,!1),o=f.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),r=function(e,t,n){var r=n.css,o=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(r=b(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=function(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){a(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function f(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}var d={},p=function(e){var t;return function(){return void 0===t&&(t=function(){return window&&document&&document.all&&!window.atob}.apply(this,arguments)),t}}(),g=function(e){var t={};return function(e){return void 0===t[e]&&(t[e]=function(e){return document.querySelector(e)}.call(this,e)),t[e]}}(),h=null,v=0,m=[],b=n(15);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=p()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=o(e,t);return r(n,t),function(e){for(var i=[],a=0;a<n.length;a++){var s=n[a];(l=d[s.id]).refs--,i.push(l)}e&&r(o(e,t),t);for(a=0;a<i.length;a++){var l;if(0===(l=i[a]).refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete d[l.id]}}}};var y=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i)?e:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(e,t,n){var r=n(17);"undefined"==typeof window||window.Promise||(window.Promise=r),n(21),String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;for(var o=0|t,i=Math.max(o>=0?o:r-Math.abs(o),0);i<r;){if(function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}(n[i],e))return!0;i++}return!1}}),"undefined"!=typeof window&&[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})},function(e,t,n){(function(t){!function(n){function r(){}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this)}function i(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void s(t.promise,e)}a(t.promise,r)}else(1===e._state?a:s)(t.promise,e._value)})):e._deferreds.push(t)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void c(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,l(e)}catch(t){s(e,t)}}function s(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)i(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function c(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,s(t,e))})}catch(e){if(n)return;n=!0,s(t,e)}}var f=setTimeout;o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(r);return i(this,new u(e,t,n)),n},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function r(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(i,e)},n)}t[i]=a,0==--o&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var o=t.length,i=0;i<t.length;i++)r(i,t[i])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},o._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){f(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},void 0!==e&&e.exports?e.exports=o:n.Promise||(n.Promise=o)}(this)}).call(t,n(18).setImmediate)},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(19),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){delete s[e]}function o(e){if(l)setTimeout(o,0,e);else{var t=s[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{r(e),l=!1}}}}if(!e.setImmediate){var i,a=1,s={},l=!1,u=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick(function(){o(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),i=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){o(e.data)},i=function(t){e.port2.postMessage(t)}}():u&&"onreadystatechange"in u.createElement("script")?function(){var e=u.documentElement;i=function(t){var n=u.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():i=function(e){setTimeout(o,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return s[a]=r,i(a),a++},c.clearImmediate=r}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(7),n(20))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function i(){g&&d&&(g=!1,d.length?p=d.concat(p):h=-1,p.length&&a())}function a(){if(!g){var e=o(i);g=!0;for(var t=p.length;t;){for(d=p,p=[];++h<t;)d&&d[h].run();h=-1,t=p.length}d=null,g=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var u,c,f=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(e){c=r}}();var d,p=[],g=!1,h=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new s(e,t)),1!==p.length||g||o(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.prependListener=l,f.prependOnceListener=l,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";n(22).polyfill()},function(e,t,n){"use strict";function r(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var i=Object.keys(Object(o)),a=0,s=i.length;a<s;a++){var l=i[a],u=Object.getOwnPropertyDescriptor(o,l);void 0!==u&&u.enumerable&&(n[l]=o[l])}}return n}e.exports={assign:r,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),o=n(6),i=n(5),a=n(36),s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("undefined"!=typeof window){var n=a.getOpts.apply(void 0,e);return new Promise(function(e,t){i.default.promise={resolve:e,reject:t},r.default(n),setTimeout(function(){o.openModal()})})}};s.close=o.onAction,s.getState=o.getState,s.setActionValue=i.setActionValue,s.stopLoading=o.stopLoading,s.setDefaults=a.setDefaults,t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(0).default.MODAL,i=n(4),a=n(34),s=n(35),l=n(1);t.init=function(e){r.getNode(o)||(document.body||l.throwErr("You can only use SweetAlert AFTER the DOM has loaded!"),a.default(),i.default()),i.initModalContent(e),s.default(e)},t.default=t.init},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).default.MODAL;t.modalMarkup='\n  <div class="'+r+'" role="dialog" aria-modal="true"></div>',t.default=t.modalMarkup},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r='<div \n    class="'+n(0).default.OVERLAY+'"\n    tabIndex="-1">\n  </div>';t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).default.ICON;t.errorIconMarkup=function(){var e=r+"--error",t=e+"__line";return'\n    <div class="'+e+'__x-mark">\n      <span class="'+t+" "+t+'--left"></span>\n      <span class="'+t+" "+t+'--right"></span>\n    </div>\n  '},t.warningIconMarkup=function(){var e=r+"--warning";return'\n    <span class="'+e+'__body">\n      <span class="'+e+'__dot"></span>\n    </span>\n  '},t.successIconMarkup=function(){var e=r+"--success";return'\n    <span class="'+e+"__line "+e+'__line--long"></span>\n    <span class="'+e+"__line "+e+'__line--tip"></span>\n\n    <div class="'+e+'__ring"></div>\n    <div class="'+e+'__hide-corners"></div>\n  '}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).default.CONTENT;t.contentMarkup='\n  <div class="'+r+'">\n\n  </div>\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.default.BUTTON_CONTAINER,i=r.default.BUTTON,a=r.default.BUTTON_LOADER;t.buttonMarkup='\n  <div class="'+o+'">\n\n    <button\n      class="'+i+'"\n    ></button>\n\n    <div class="'+a+'">\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n\n  </div>\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(2),i=n(0),a=i.default.ICON,s=i.default.ICON_CUSTOM,l=["error","warning","success","info"],u={error:o.errorIconMarkup(),warning:o.warningIconMarkup(),success:o.successIconMarkup()};t.default=function(e){if(e){var t=r.injectElIntoModal(o.iconMarkup);l.includes(e)?function(e,t){var n=a+"--"+e;t.classList.add(n);var r=u[e];r&&(t.innerHTML=r)}(e,t):function(e,t){t.classList.add(s);var n=document.createElement("img");n.src=e,t.appendChild(n)}(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(4),i=function(e){navigator.userAgent.includes("AppleWebKit")&&(e.style.display="none",e.offsetHeight,e.style.display="")};t.initTitle=function(e){if(e){var t=o.injectElIntoModal(r.titleMarkup);t.textContent=e,i(t)}},t.initText=function(e){if(e){var t=document.createDocumentFragment();e.split("\n").forEach(function(e,n,r){t.appendChild(document.createTextNode(e)),n<r.length-1&&t.appendChild(document.createElement("br"))});var n=o.injectElIntoModal(r.textMarkup);n.appendChild(t),i(n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(4),i=n(0),a=i.default.BUTTON,s=i.default.DANGER_BUTTON,l=n(3),u=n(2),c=n(6),f=n(5),d=function(e,t,n){var o=t.text,i=t.value,d=t.className,p=t.closeModal,g=r.stringToNode(u.buttonMarkup),h=g.querySelector("."+a),v=a+"--"+e;h.classList.add(v),d&&(Array.isArray(d)?d:d.split(" ")).filter(function(e){return e.length>0}).forEach(function(e){h.classList.add(e)}),n&&e===l.CONFIRM_KEY&&h.classList.add(s),h.textContent=o;var m={};return m[e]=i,f.setActionValue(m),f.setActionOptionsFor(e,{closeModal:p}),h.addEventListener("click",function(){return c.onAction(e)}),g};t.default=function(e,t){var n=o.injectElIntoModal(u.footerMarkup);for(var r in e){var i=e[r],a=d(r,i,t);i.visible&&n.appendChild(a)}0===n.children.length&&n.remove()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(4),i=n(2),a=n(5),s=n(6),l=n(0).default.CONTENT,u=function(e){e.addEventListener("input",function(e){var t=e.target.value;a.setActionValue(t)}),e.addEventListener("keyup",function(e){if("Enter"===e.key)return s.onAction(r.CONFIRM_KEY)}),setTimeout(function(){e.focus(),a.setActionValue("")},0)};t.default=function(e){if(e){var t=o.injectElIntoModal(i.contentMarkup),n=e.element,r=e.attributes;"string"==typeof n?function(e,t,n){var r=document.createElement(t),o=l+"__"+t;for(var i in r.classList.add(o),n){var a=n[i];r[i]=a}"input"===t&&u(r),e.appendChild(r)}(t,n,r):t.appendChild(n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(2);t.default=function(){var e=r.stringToNode(o.overlayMarkup);document.body.appendChild(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(6),i=n(1),a=n(3),s=n(0),l=s.default.MODAL,u=s.default.BUTTON,c=s.default.OVERLAY,f=function(e){if(r.default.isOpen)switch(e.key){case"Escape":return o.onAction(a.CANCEL_KEY)}},d=function(e){if(r.default.isOpen)switch(e.key){case"Tab":return function(e){e.preventDefault(),g()}(e)}},p=function(e){if(r.default.isOpen)return"Tab"===e.key&&e.shiftKey?function(e){e.preventDefault(),h()}(e):void 0},g=function(){var e=i.getNode(u);e&&(e.tabIndex=0,e.focus())},h=function(){var e=i.getNode(l).querySelectorAll("."+u),t=e[e.length-1];t&&t.focus()},v=function(){var e=i.getNode(l).querySelectorAll("."+u);e.length&&(function(e){e[e.length-1].addEventListener("keydown",d)}(e),function(e){e[0].addEventListener("keydown",p)}(e))},m=function(e){if(i.getNode(c)===e.target)return o.onAction(a.CANCEL_KEY)};t.default=function(e){e.closeOnEsc?document.addEventListener("keyup",f):document.removeEventListener("keyup",f),e.dangerMode?g():h(),v(),function(e){var t=i.getNode(c);t.removeEventListener("click",m),e&&t.addEventListener("click",m)}(e.closeOnClickOutside),function(e){r.default.timer&&clearTimeout(r.default.timer),e&&(r.default.timer=window.setTimeout(function(){return o.onAction(a.CANCEL_KEY)},e))}(e.timer)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(3),i=n(37),a=n(38),s={title:null,text:null,icon:null,buttons:o.defaultButtonList,content:null,className:null,closeOnClickOutside:!0,closeOnEsc:!0,dangerMode:!1,timer:null},l=Object.assign({},s);t.setDefaults=function(e){l=Object.assign({},s,e)};var u=function(e){var t=e&&e.button,n=e&&e.buttons;return void 0!==t&&void 0!==n&&r.throwErr("Cannot set both 'button' and 'buttons' options!"),void 0!==t?{confirm:t}:n},c=function(e){return r.ordinalSuffixOf(e+1)},f=function(e,t){r.throwErr(c(t)+" argument ('"+e+"') is invalid")},d=function(e,t){var n=e+1,o=t[n];r.isPlainObject(o)||void 0===o||r.throwErr("Expected "+c(n)+" argument ('"+o+"') to be a plain object")},p=function(e,t,n,o){var i=t instanceof Element;if("string"===typeof t){if(0===n)return{text:t};if(1===n)return{text:t,title:o[0]};if(2===n)return d(n,o),{icon:t};f(t,n)}else{if(i&&0===n)return d(n,o),{content:t};if(r.isPlainObject(t))return function(e,t){var n=e+1,o=t[n];void 0!==o&&r.throwErr("Unexpected "+c(n)+" argument ("+o+")")}(n,o),t;f(t,n)}};t.getOpts=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={};e.forEach(function(t,r){var o=p(0,t,r,e);Object.assign(n,o)});var r=u(n);n.buttons=o.getButtonListOpts(r),delete n.button,n.content=i.getContentOpts(n.content);var c=Object.assign({},s,l,n);return Object.keys(c).forEach(function(e){a.DEPRECATED_OPTS[e]&&a.logDeprecation(e)}),c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o={element:"input",attributes:{placeholder:""}};t.getContentOpts=function(e){return r.isPlainObject(e)?Object.assign({},e):e instanceof Element?{element:e}:"input"===e?o:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logDeprecation=function(e){var n=t.DEPRECATED_OPTS[e],r=n.onlyRename,o=n.replacement,i=n.subOption,a=n.link,s='SweetAlert warning: "'+e+'" option has been '+(r?"renamed":"deprecated")+".";o&&(s+=" Please use"+(i?' "'+i+'" in ':" ")+'"'+o+'" instead.');var l="https://sweetalert.js.org";s+=a?" More details: "+l+a:" More details: "+l+"/guides/#upgrading-from-1x",console.warn(s)},t.DEPRECATED_OPTS={type:{replacement:"icon",link:"/docs/#icon"},imageUrl:{replacement:"icon",link:"/docs/#icon"},customClass:{replacement:"className",onlyRename:!0,link:"/docs/#classname"},imageSize:{},showCancelButton:{replacement:"buttons",link:"/docs/#buttons"},showConfirmButton:{replacement:"button",link:"/docs/#button"},confirmButtonText:{replacement:"button",link:"/docs/#button"},confirmButtonColor:{},cancelButtonText:{replacement:"buttons",link:"/docs/#buttons"},closeOnConfirm:{replacement:"button",subOption:"closeModal",link:"/docs/#button"},closeOnCancel:{replacement:"buttons",subOption:"closeModal",link:"/docs/#buttons"},showLoaderOnConfirm:{replacement:"buttons"},animation:{},inputType:{replacement:"content",link:"/docs/#content"},inputValue:{replacement:"content",link:"/docs/#content"},inputPlaceholder:{replacement:"content",link:"/docs/#content"},html:{replacement:"content",link:"/docs/#content"},allowEscapeKey:{replacement:"closeOnEsc",onlyRename:!0,link:"/docs/#closeonesc"},allowClickOutside:{replacement:"closeOnClickOutside",onlyRename:!0,link:"/docs/#closeonclickoutside"}}}])}),function(e,t,n){if(e){for(var r,o={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},i={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},s={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},l=1;l<20;++l)o[111+l]="f"+l;for(l=0;l<=9;++l)o[l+96]=l.toString();g.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},g.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},g.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},g.prototype.reset=function(){return this._callbacks={},this._directMap={},this},g.prototype.stopCallback=function(e,n){return!((" "+n.className+" ").indexOf(" mousetrap ")>-1)&&(!function e(n,r){return null!==n&&n!==t&&(n===r||e(n.parentNode,r))}(n,this.target)&&("INPUT"==n.tagName||"SELECT"==n.tagName||"TEXTAREA"==n.tagName||n.isContentEditable))},g.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},g.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);r=null},g.init=function(){var e=g(t);for(var n in e)"_"!==n.charAt(0)&&(g[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n))},g.init(),e.Mousetrap=g,"undefined"!=typeof module&&module.exports&&(module.exports=g),"function"==typeof define&&define.amd&&define(function(){return g})}function u(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function c(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return o[e.which]?o[e.which]:i[e.which]?i[e.which]:String.fromCharCode(e.which).toLowerCase()}function f(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function d(e,t,n){return n||(n=function(){if(!r)for(var e in r={},o)e>95&&e<112||o.hasOwnProperty(e)&&(r[o[e]]=e);return r}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function p(e,t){var n,r,o,i=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),o=0;o<n.length;++o)r=n[o],s[r]&&(r=s[r]),t&&"keypress"!=t&&a[r]&&(r=a[r],i.push("shift")),f(r)&&i.push(r);return{key:r,modifiers:i,action:t=d(r,i,t)}}function g(e){var n=this;if(e=e||t,!(n instanceof g))return new g(e);n.target=e,n._callbacks={},n._directMap={};var r,o={},i=!1,a=!1,s=!1;function l(e){e=e||{};var t,n=!1;for(t in o)e[t]?n=!0:o[t]=0;n||(s=!1)}function d(e,t,r,i,a,s){var l,u,c,d,p=[],g=r.type;if(!n._callbacks[e])return[];for("keyup"==g&&f(e)&&(t=[e]),l=0;l<n._callbacks[e].length;++l)if(u=n._callbacks[e][l],(i||!u.seq||o[u.seq]==u.level)&&g==u.action&&("keypress"==g&&!r.metaKey&&!r.ctrlKey||(c=t,d=u.modifiers,c.sort().join(",")===d.sort().join(",")))){var h=!i&&u.combo==a,v=i&&u.seq==i&&u.level==s;(h||v)&&n._callbacks[e].splice(l,1),p.push(u)}return p}function h(e,t,r,o){n.stopCallback(t,t.target||t.srcElement,r,o)||!1===e(t,r)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(t),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(t))}function v(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=c(e);t&&("keyup"!=e.type||i!==t?n.handleKey(t,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):i=!1)}function m(e,t,n,a){function u(t){return function(){s=t,++o[e],clearTimeout(r),r=setTimeout(l,1e3)}}function f(t){h(n,t,e),"keyup"!==a&&(i=c(t)),setTimeout(l,10)}o[e]=0;for(var d=0;d<t.length;++d){var g=d+1===t.length?f:u(a||p(t[d+1]).action);b(t[d],g,a,e,d)}}function b(e,t,r,o,i){n._directMap[e+":"+r]=t;var a,s=(e=e.replace(/\s+/g," ")).split(" ");s.length>1?m(e,s,t,r):(a=p(e,r),n._callbacks[a.key]=n._callbacks[a.key]||[],d(a.key,a.modifiers,{type:a.action},o,e,i),n._callbacks[a.key][o?"unshift":"push"]({callback:t,modifiers:a.modifiers,action:a.action,seq:o,level:i,combo:e}))}n._handleKey=function(e,t,n){var r,o=d(e,t,n),i={},u=0,c=!1;for(r=0;r<o.length;++r)o[r].seq&&(u=Math.max(u,o[r].level));for(r=0;r<o.length;++r)if(o[r].seq){if(o[r].level!=u)continue;c=!0,i[o[r].seq]=1,h(o[r].callback,n,o[r].combo,o[r].seq)}else c||h(o[r].callback,n,o[r].combo);var p="keypress"==n.type&&a;n.type!=s||f(e)||p||l(i),a=c&&"keydown"==n.type},n._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)b(e[r],t,n)},u(e,"keypress",v),u(e,"keydown",v),u(e,"keyup",v)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null);var pgnReader=function(e,t){var n={},r=new Utils;n.configuration=e;!function(e){void 0===e.position&&(e.position="start"),void 0===e.pgn&&(void 0===e.pgnFile?e.pgn="":e.pgn=function(e){let t=new XMLHttpRequest;if(t.open("GET",e,!1),t.send(),200===t.status)return t.responseText}(e.pgnFile)),void 0===e.locale&&(e.locale="en")}(e);var o=pgnParser;n.startMove=0;var i=t||new Chess,a=function(){"start"==e.position?i.reset():i.load(e.position)};n.PGN_TAGS={Event:"the name of the tournament or match event",Site:"the location of the event",Date:"the starting date of the game (format: YYYY.MM.TT)",Round:"the playing round ordinal of the game",White:"the player of the white pieces (last name, pre name)",Black:"the player of the black pieces (last name, pre name)",Result:"the result of the game (1 - 0, 1/2 - 1/2, 0 - 1)",Board:"the board number in a team event",ECO:"ECO-Opening-Key (ECO = 'Encyclopaedia of Chess Openings')",WhitemyELO:"myELO-score white (at the beginning of the game)",BlackmyELO:"myELO-score black (at the beginning of the game)",WhiteDays:"rate in days for white",BlackDays:"rate in days for black",myChessNo:"identification-no. of the game on the myChess.de - server",Annotator:"The person providing notes to the game.",PlyCount:"String value denoting total number of half-moves played.",TimeControl:"40/7200:3600 (moves per seconds: sudden death seconds)",Time:'Time the game started, in "HH:MM:SS" format, in local clock time.',Termination:'Gives more details about the termination of the game. It may be "abandoned", "adjudication" (result determined by third-party adjudication), "death", "emergency", "normal", "rules infraction", "time forfeit", or "unterminated".',Mode:'"OTB" (over-the-board) "ICS" (Internet Chess Server)',SetUp:'"0": position is start position, "1": tag FEN defines the position',FEN:'Alternative start position, tag SetUp has to be set to "1"'},n.PROMOTIONS={q:"queen",r:"rook",b:"bishop",n:"knight"},n.NAGs=new Array(220),n.NAGs[1]="!",n.NAGs[2]="?",n.NAGs[3]="‼",n.NAGs[4]="⁇",n.NAGs[5]="⁉",n.NAGs[6]="⁈",n.NAGs[7]="□",n.NAGs[10]="=",n.NAGs[13]="∞",n.NAGs[14]="⩲",n.NAGs[15]="⩱",n.NAGs[16]="±",n.NAGs[17]="∓",n.NAGs[18]="+−",n.NAGs[19]="-+",n.NAGs[22]="⨀",n.NAGs[23]="⨀",n.NAGs[32]="⟳",n.NAGs[33]="⟳",n.NAGs[36]="→",n.NAGs[37]="→",n.NAGs[40]="↑",n.NAGs[41]="↑",n.NAGs[44]="=∞",n.NAGs[132]="⇆",n.NAGs[133]="⇆",n.NAGs[136]="⊕",n.NAGs[140]="∆",n.NAGs[146]="N",n.NAGs[220]="D",n.NAGs[221]="D",n.PGN_NAGS={};for(var s=0;s<n.NAGs.length;s++)n.PGN_NAGS[n.NAGs[s]]=s;n.PGN_NAGS["!!"]=3,n.PGN_NAGS["??"]=4,n.PGN_NAGS["!?"]=5,n.PGN_NAGS["?!"]=6;var l=function(e){var t="";if(null==e)return t;for(var r=0;r<e.length;r++){var o=parseInt(e[r].substring(1));if(220!=o){var i=n.NAGs[o];t+=void 0!==i?i:"$"+o}}return t},u=function(e){return"P"==e?"":i18next.t(e,{lng:n.configuration.locale})},c=function(e){if(void 0===e.row)return e.notation;var t=e.fig?u(e.fig):"",n=e.disc?e.disc:"",r=e.strike?e.strike:"";if(""===t&&"x"===r)return e.notation;var o=e.check?e.check:"",i=e.mate?e.mate:"",a=e.promotion?"="+u(e.promotion.substring(1,2).toLowerCase()):"";return t+n+r+e.col+e.row+a+o+i},f=function(){var e=d();return p(e),n},d=function(){let t=function(e){let t,r={},o=0,i="",a=/\[([^\]]+)]/g;for(;t=a.exec(e);){let e=t[0].match(/\[(\w+)\s+\"([^\"]+)\"/);if(e){let a=e[1];n.PGN_TAGS[a]&&(r[a]=e[2]),o=t.index,i=t[0]}}return{headers:r,rest:e.substring(o+i.length)}}(e.pgn);return n.headers=t.headers,function(){if(n.headers.SetUp)if("0"===n.headers.SetUp)e.position="start";else{var t=n.headers.FEN;e.position=t}n.headers.Result&&(n.endGame=n.headers.Result)}(),t.rest},p=function(t){var i=t.trim();i=(i=i.replace(/(\r\n|\n|\r)/gm," ")).replace(/\t/gm," ");var a=o.parse(i)[0];!function(e){"string"==typeof e[e.length-1]&&(n.endGame=e.pop())}(a),w(a),"b"===e.position.split(/\s+/)[1]&&g(0)&&"w"===n.moves[0].turn&&r.pvEach(k(),function(e){e.turn="w"===e.turn?"b":"w"}),r.pvEach(k(),function(e){for(s=0;s<e.variations.length;s++)e.variations[s]=e.variations[s][0]})},g=function(e){return k().length>e},h=function(e){if(!g(e))return!0;var t=k()[e];return null===t||(0!=e||!t)&&null===t.prev},v=function(e){return k()[e]},m=function(e,t){if(0===arguments.length){var n=v(0);m(n,0)}else if(e.variationLevel=t,void 0!==e.next&&m(v(e.next),t),e.variations)for(var r=0;r<e.variations.length;r++)m(e.variations[r],t+1)},b=function(e){var t=function(e,t){var n=e[t];return e.splice(t,1),n};if(!h(e))if(0!==e){var r=v(e);if(y(r))for(var o=v(v(r.prev).next).variations,i=0;o.length;i++)if(o[i]===r){t(o,i);return void 0!==r.next&&b(r.next),void(k()[r.index]=null)}if(0===r.variations.length)return void 0!==r.next&&null!==r.next&&b(r.next),n.moves[r.prev].next=null,void(n.moves[e]=null);if(r.variations.length>0){void 0!==r.next&&b(r.next);var a=t(r.variations,0),s=a.variationLevel;n.moves[r.prev].next=a.index,n.moves[e]=null,m(a,s-1)}}else n.moves=[]},y=function(e){return e.variationLevel>0&&("number"!=typeof e.prev||k()[e.prev].next!=e.index)},w=function(e){n.moves=[];var t=-1,o=function(e,s,l){var u=null!=l?n.moves[l]:null;r.pvEach(e,function(e,c){t++,e.variationLevel=s,n.moves.push(e),c>0&&(n.moves[t-1].variationLevel>s?(u=function(e,t){for(;t>=0;){if(n.moves[t].variationLevel==e)return n.moves[t];t--}return null}(s,t-1),l=u.index):(l=t-1,u=n.moves[l])),function(e,t,n,r){null!=r&&(n.prev=t,r.next||(r.next=e)),n.index=e}(t,l,e,u),"number"==typeof e.prev?i.load(v(e.prev).fen):a();var f=i.move(e.notation.notation,{sloppy:!0});if(null==f)throw"No legal move: "+e.notation.notation;var d=i.fen();e.fen=d,e.from=f.from,e.to=f.to,null!=f&&(e.notation.notation=f.san),null!=f&&"c"==f.flags&&(e.notation.strike="x"),null!=f&&i.in_checkmate()?e.notation.check="#":null!=f&&i.in_check()&&(e.notation.check="+"),e.moveNumber=function(e){var t=e.split(/\s+/),n=parseInt(t[5],10);return"b"===t[1]?n:n-1}(d),r.pvEach(e.variations,function(e){o(e,s+1,l)})})};n.firstMove=e[0],o(e,0,null)};var x=function(e,t){if(0===arguments.length&&(e=v(n.startMove),t=[]),t.push(e),e.variations)for(var r=0;r<e.variations.length;r++)x(e.variations[r],t);return e.next?x(v(e.next),t):t};function k(){return void 0!==n.moves?n.moves:(f(),n.moves)}return{configuration:e,readHeaders:d,deleteMove:b,promoteMove:function(e){var t=function(e){return y(e)?e:t(v(e.prev))},n=v(e);if(void 0!==n.variationLevel&&0!==n.variationLevel){var r,o=t(n),i=v(v(o.prev).next);for(s=0;s<i.variations.length;s++)i.variations[s]===o&&(r=s);if(r>0){let e=i.variations[r-1];i.variations[r-1]=i.variations[r],i.variations[r]=e}else{let e=i;var a=i.variations;v(i.prev).next=o.index,e.variations=o.variations,o.variations=a,o.variations[0]=e}m()}},isDeleted:h,readMoves:function(){return p},getMoves:k,getOrderedMoves:x,getMove:v,getEndGame:function(){return n.endGame},getHeaders:function(){return void 0!==n.headers?n.headers:(f(),n.headers)},getParser:function(){return o},movesMainLine:function(){var e=v(n.startMove),t=[];for(t.push(e);e.next;)e=v(e.next),t.push(e);return t},write_pgn:function(){function e(e){e.isEmpty()||" "==e.lastChar()||e.append(" ")}var t,r,o=function(t,n){null!=t&&(e(n),n.append("{"),n.append(t),n.append("}"))},i=function(t,n){e(n),n.append("("),a(t,n),e(n),n.append(")")},a=function(t,n){if(null!=t){!function(e,t){o(e.commentMove,t)}(t,n),function(t,n){e(n),"w"===t.turn?(n.append(""+t.moveNumber),n.append(".")):y(t)&&(n.append(""+t.moveNumber),n.append("..."))}(t,n),function(e,t){o(e.commentBefore,t)}(t,n),function(t,n){e(n),n.append(t.notation.notation)}(t,n),function(e,t){e.nag&&e.nag.forEach(function(e){t.append(e)})}(t,n),function(e,t){o(e.commentAfter,t)}(t,n),function(e,t){if((e=>e.commentDiag&&(e.commentDiag.colorArrows&&e.commentDiag.colorArrows.length>0||e.commentDiag.colorFields&&e.commentDiag.colorFields.length>0))(e)){let n=StringBuilder(""),r=!0;n.append("[%csl "),(e=>e.commentDiag.colorFields||[])(e).forEach(e=>{r?n.append(""):n.append(","),r=!1,n.append(e)}),n.append("]"),r=!0,n.append("[%cal "),(e=>e.commentDiag.colorArrows||[])(e).forEach(e=>{r?n.append(""):n.append(","),r=!1,n.append(e)}),n.append("]"),o(n.toString(),t)}}(t,n),function(e,t){for(var n=0;n<e.variations.length;n++)i(e.variations[n],t)}(t,n);var r=function(e){return e.next?v(e.next):null}(t);a(r,n)}},s=StringBuilder("");return t=v(0),r=s,a(t,s),function(e){n.endGame&&(e.append(" "),e.append(n.endGame))}(r),s.toString()},nag_to_symbol:l,startVariation:y,endVariation:function(e){return e.variationLevel>0&&!e.next},afterMoveWithVariation:function(e){return k()[e.prev]&&k()[e.prev].variations.length>0},changeNag:function(e,t,r){var o=v(t);null==o.nag&&(o.nag=[]);var i="$"==e[0]?e:function(e){var t=n.PGN_NAGS[e];return"undefined"===t?null:"$"+t}(e);if(r)-1==o.nag.indexOf(i)&&o.nag.push(i);else{var a=o.nag.indexOf(i);a>-1&&o.nag.splice(a,1)}},clearNags:function(e){v(e).nag=[]},addMove:function(e,t){function n(e){a();var t=i.move(e);return void 0===t?null:(void 0===v(0)?null:v(0).notation.notation)==t.san?0:function(e){if(void 0===v(0))return null;var t,n=v(0).variations;for(t in n)if(n[t].notation.notation==e.san)return n[t].moveNumber;return null}(t)}var r=function(e,t){if(null==t)return n(e);var r=v(t);if(void 0===r)return null;i.load(r.fen);var o=i.move(e),a=v(r.next);if(void 0===a)return null;if(a.notation.notation==o.san)return r.next;var l=v(r.next);for(s=0;s<l.variations.length;s++){var u=l.variations[s];if(u.notation.notation==o.san)return u.index}return null}(e,t);if("number"==typeof r)return r;var o={};o.from=e.from,o.to=e.to,o.notation={},o.variations=[],null==t?(a(),o.turn=i.turn(),o.moveNumber=1):(i.load(v(t).fen),o.turn=function(e){return"w"===v(e).turn?"b":"w"}(t),"w"===o.turn?o.moveNumber=v(t).moveNumber+1:o.moveNumber=v(t).moveNumber);var l=i.move(e);o.fen=i.fen(),"O"!=l.san.substring(0,1)?(o.notation.notation=l.san,o.notation.col=l.to.substring(0,1),o.notation.row=l.to.substring(1,2),"p"!=l.piece&&(o.notation.fig=l.piece.charAt(0).toUpperCase()),l.promotion&&(o.notation.promotion="="+l.promotion.toUpperCase()),(l.flags.includes(i.FLAGS.CAPTURE)||l.flags.includes(i.FLAGS.EP_CAPTURE))&&(o.notation.strike="x"),o.notation.ep=l.flags.includes(i.FLAGS.EP_CAPTURE),i.in_check()&&(i.in_checkmate()?o.notation.mate="#":o.notation.check="+")):o.notation.notation=l.san,k().push(o),o.prev=t;var u=k().length-1;return o.index=u,function(e,t,n){var r=v(t);if(void 0===r){if(0===n)return;return v(0).variations.push(e),e.variationLevel=1,void("b"==e.turn&&(e.moveNumber=r.moveNumber))}r.next?(v(r.next).variations.push(e),e.variationLevel=(r.variationLevel?r.variationLevel:0)+1,"b"==e.turn&&(e.moveNumber=r.moveNumber)):(r.next=n,e.variationLevel=r.variationLevel)}(o,t,u),u},has_diagram_nag:function(e){return void 0!==e.nag&&null!=e.nag&&e.nag.indexOf("$220")>-1},PGN_NAGS:n.PGN_NAGS,PROMOTIONS:n.PROMOTIONS,NAGS:n.NAGs,san:c,sanWithNags:function(e){var t=c(e.notation);return e.nag&&(t+=l(e.nag)),t},game:i,load_pgn:f,possibleMoves:function(e){const t={};return e.SQUARES.forEach(n=>{const r=e.moves({square:n,verbose:!0});r.length&&(t[n]=r.map(e=>e.to))}),t},setShapes:function(e,t){e.commentDiag||(e.commentDiag={}),e.commentDiag.colorArrows=[],e.commentDiag.colorFields=[],t.forEach(t=>{if(t.dest){let n=t.brush.slice(0,1).toUpperCase(),r=t.orig+t.dest;e.commentDiag.colorArrows.push(n+r)}else{let n=t.brush.slice(0,1).toUpperCase(),r=t.orig;e.commentDiag.colorFields.push(n+r)}})}}},pgnParser=function(){"use strict";function e(t,n,r,o){this.message=t,this.expected=n,this.found=r,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),e.buildMessage=function(e,t){var n={literal:function(e){return'"'+o(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?i(e.parts[t][0])+"-"+i(e.parts[t][1]):i(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}return"Expected "+function(e){var t,r,o,i=new Array(e.length);for(t=0;t<e.length;t++)i[t]=(o=e[t],n[o.type](o));if(i.sort(),i.length>0){for(t=1,r=1;t<i.length;t++)i[t-1]!==i[t]&&(i[r]=i[t],r++);i.length=r}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(e)+" but "+function(e){return e?'"'+o(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:function(t,n){n=void 0!==n?n:{};var r,o={},i={pgn:Dn},a=Dn,s=function(e,t){var n=t||[];return n.unshift(e),n},l=function(e,t){var n=t||[];return n.unshift(e),n},u=function(){return[[]]},c=function(e){return e},f=function(e){return e},d=function(e,t,n,r,o,i,a,s,l){var u=l||[],c={turn:"w"};return c.moveNumber=t,c.notation=r,c.commentBefore=n,c.commentAfter=i,c.commentMove=e,c.variations=s||[],c.nag=o||null,u.unshift(c),c.commentDiag=a,u},p=function(e,t,n,r,o,i,a,s,l){var u=l||[],c={turn:"b"};return c.moveNumber=t,c.notation=r,c.commentBefore=n,c.commentAfter=i,c.commentMove=e,c.variations=s||[],u.unshift(c),c.nag=o||null,c.commentDiag=a,u},g="1:0",h=Pn("1:0",!1),v=function(){return["1:0"]},m="0:1",b=Pn("0:1",!1),y=function(){return["0:1"]},w="1-0",x=Pn("1-0",!1),k=function(){return["1-0"]},E="0-1",C=Pn("0-1",!1),O=function(){return["0-1"]},_="1/2-1/2",S=Pn("1/2-1/2",!1),A=function(){return["1/2-1/2"]},M="*",N=Pn("*",!1),P=function(){return["*"]},T=function(e,t){for(var n=e,r=0;r<t.length;r++)n+=" "+t[r][1];return n},L=/^[^}]/,j=Tn(["}"],!0,!1),R=function(e){return e.join("").trim()},I=function(e){return e},B=function(e,t){var n={};return e&&(n.colorFields=e),t&&(n.colorArrows=t),n},D="%csl",q=Pn("%csl",!1),U=function(e){return e},K="%cal",F=Pn("%cal",!1),G=",",H=Pn(",",!1),$=function(e,t){var n=[];n.push(e);for(var r=0;r<t.length;r++)n.push(t[r][2]);return n},V=function(e,t){return e+t},z=function(e,t,n){return e+t+n},W="Y",X=Pn("Y",!1),Y=function(){return"Y"},Q="G",J=Pn("G",!1),Z=function(){return"G"},ee="R",te=Pn("R",!1),ne=function(){return"R"},re="B",oe=Pn("B",!1),ie=function(){return"B"},ae=function(e,t){return e+t},se="{",le=Pn("{",!1),ue="}",ce=Pn("}",!1),fe="[",de=Pn("[",!1),pe="]",ge=Pn("]",!1),he=function(e,t,n){var r=t||[];return r.unshift(e),r},ve=function(e,t){var n=t||[];return n.unshift(e),n},me="(",be=Pn("(",!1),ye=")",we=Pn(")",!1),xe=".",ke=Pn(".",!1),Ee=function(e){return e},Ce=Ln("integer"),Oe=/^[0-9]/,_e=Tn([["0","9"]],!1,!1),Se=function(e){return parseInt(e.join(""),10)},Ae=" ",Me=Pn(" ",!1),Ne=function(){return""},Pe=function(e,t,n,r,o,i,a){var s={};return s.fig=e||null,s.disc=t||null,s.strike=n||null,s.col=r,s.row=o,s.check=a||null,s.promotion=i,s.notation=(e||"")+(t||"")+(n||"")+r+o+(i||"")+(a||""),s},Te=function(e,t,n,r,o,i,a,s){var l={};return l.fig=e||null,l.strike="x"==r?r:null,l.col=o,l.row=i,l.check=s||null,l.notation=(e&&"P"!==e?e:"")+t+n+("x"==r?r:"-")+o+i+(a||"")+(s||""),l.promotion=a,l},Le=function(e,t,n,r,o,i){var a={};return a.fig=e||null,a.strike=t||null,a.col=n,a.row=r,a.check=i||null,a.notation=(e||"")+(t||"")+n+r+(o||"")+(i||""),a.promotion=o,a},je="O-O-O",Re=Pn("O-O-O",!1),Ie=function(e){var t={};return t.notation="O-O-O"+(e||""),t.check=e||null,t},Be="O-O",De=Pn("O-O",!1),qe=function(e){var t={};return t.notation="O-O"+(e||""),t.check=e||null,t},Ue="+-",Ke=Pn("+-",!1),Fe="+",Ge=Pn("+",!1),He=function(e){return e[1]},$e="$$$",Ve=Pn("$$$",!1),ze="#",We=Pn("#",!1),Xe="=",Ye=Pn("=",!1),Qe=function(e){return"="+e},Je=function(e,t){var n=t||[];return n.unshift(e),n},Ze="$",et=Pn("$",!1),tt=function(e){return"$"+e},nt="!!",rt=Pn("!!",!1),ot=function(){return"$3"},it="??",at=Pn("??",!1),st=function(){return"$4"},lt="!?",ut=Pn("!?",!1),ct=function(){return"$5"},ft="?!",dt=Pn("?!",!1),pt=function(){return"$6"},gt="!",ht=Pn("!",!1),vt=function(){return"$1"},mt="?",bt=Pn("?",!1),yt=function(){return"$2"},wt="‼",xt=Pn("‼",!1),kt="⁇",Et=Pn("⁇",!1),Ct="⁉",Ot=Pn("⁉",!1),_t="⁈",St=Pn("⁈",!1),At="□",Mt=Pn("□",!1),Nt=function(){return"$7"},Pt=function(){return"$10"},Tt="∞",Lt=Pn("∞",!1),jt=function(){return"$13"},Rt="⩲",It=Pn("⩲",!1),Bt=function(){return"$14"},Dt="⩱",qt=Pn("⩱",!1),Ut=function(){return"$15"},Kt="±",Ft=Pn("±",!1),Gt=function(){return"$16"},Ht="∓",$t=Pn("∓",!1),Vt=function(){return"$17"},zt=function(){return"$18"},Wt="-+",Xt=Pn("-+",!1),Yt=function(){return"$19"},Qt="⨀",Jt=Pn("⨀",!1),Zt=function(){return"$22"},en="⟳",tn=Pn("⟳",!1),nn=function(){return"$32"},rn="→",on=Pn("→",!1),an=function(){return"$36"},sn="↑",ln=Pn("↑",!1),un=function(){return"$40"},cn="⇆",fn=Pn("⇆",!1),dn=function(){return"$132"},pn="D",gn=Pn("D",!1),hn=function(){return"$220"},vn=/^[RNBQKP]/,mn=Tn(["R","N","B","Q","K","P"],!1,!1),bn=/^[a-h]/,yn=Tn([["a","h"]],!1,!1),wn=/^[1-8]/,xn=Tn([["1","8"]],!1,!1),kn="x",En=Pn("x",!1),Cn="-",On=Pn("-",!1),_n=0,Sn=[{line:1,column:1}],An=0,Mn=[],Nn=0;if("startRule"in n){if(!(n.startRule in i))throw new Error("Can't start parsing from rule \""+n.startRule+'".');a=i[n.startRule]}function Pn(e,t){return{type:"literal",text:e,ignoreCase:t}}function Tn(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function Ln(e){return{type:"other",description:e}}function jn(e){var n,r=Sn[e];if(r)return r;for(n=e-1;!Sn[n];)n--;for(r={line:(r=Sn[n]).line,column:r.column};n<e;)10===t.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return Sn[e]=r,r}function Rn(e,t){var n=jn(e),r=jn(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function In(e){_n<An||(_n>An&&(An=_n,Mn=[]),Mn.push(e))}function Bn(t,n,r){return new e(e.buildMessage(t,n),t,n,r)}function Dn(){var e,t,n;return e=_n,(t=function(){var e;return _n,(e=Un())!==o&&(e=c(e)),e}())!==o?((n=Kn())===o&&(n=null),n!==o?e=t=s(t,n):(_n=e,e=o)):(_n=e,e=o),e===o&&(e=_n,(t=qn())!==o?((n=Un())===o&&(n=null),n!==o?e=t=l(t,n):(_n=e,e=o)):(_n=e,e=o),e===o&&(e=_n,(t=rr())===o&&(t=null),t!==o&&(t=u()),e=t)),e}function qn(){var e;return _n,(e=Kn())!==o&&(e=f(e)),e}function Un(){var e,n,r,i,a,s,l,u,c,f,p,g,h,v,m,b,y,w;return e=_n,(n=rr())===o&&(n=null),n!==o?((r=Gn())===o&&(r=null),r!==o?((i=rr())===o&&(i=null),i!==o?((a=function(){var e,n,r;return e=_n,(n=nr())!==o?(46===t.charCodeAt(_n)?(r=xe,_n++):(r=o,0===Nn&&In(ke)),r===o&&(r=null),r!==o?(n=Ee(n),e=n):(_n=e,e=o)):(_n=e,e=o),e}())===o&&(a=null),a!==o?((s=rr())===o&&(s=null),s!==o?((l=Gn())===o&&(l=null),l!==o?((u=rr())===o&&(u=null),u!==o&&(c=or())!==o?((f=rr())===o&&(f=null),f!==o?((p=sr())===o&&(p=null),p!==o?((g=rr())===o&&(g=null),g!==o?((h=Gn())===o&&(h=null),h!==o?((v=rr())===o&&(v=null),v!==o?((m=$n())===o&&(m=null),m!==o?((b=rr())===o&&(b=null),b!==o?((y=function e(){var t,n,r,i,a,s,l;return t=_n,(n=er())!==o&&(r=Un())!==o&&tr()!==o?((i=rr())===o&&(i=null),i!==o?((a=e())===o&&(a=null),a!==o?((s=rr())===o&&(s=null),s!==o?((l=ur())===o&&(l=null),l!==o?(n=he(r,a,l),t=n):(_n=t,t=o)):(_n=t,t=o)):(_n=t,t=o)):(_n=t,t=o)):(_n=t,t=o),t}())===o&&(y=null),y!==o?((w=Kn())===o&&(w=null),w!==o?e=n=d(r,a,l,c,p,h,m,y,w):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o),e===o&&(e=Fn()),e}function Kn(){var e,t,n,r,i,a,s,l,u,c,f,d,g,h,v,m,b,y;return e=_n,(t=rr())===o&&(t=null),t!==o?((n=Gn())===o&&(n=null),n!==o?((r=rr())===o&&(r=null),r!==o?((i=ur())===o&&(i=null),i!==o?((a=rr())===o&&(a=null),a!==o?((s=Gn())===o&&(s=null),s!==o?((l=rr())===o&&(l=null),l!==o&&(u=or())!==o?((c=rr())===o&&(c=null),c!==o?((f=sr())===o&&(f=null),f!==o?((d=rr())===o&&(d=null),d!==o?((g=Gn())===o&&(g=null),g!==o?((h=rr())===o&&(h=null),h!==o?((v=$n())===o&&(v=null),v!==o?((m=rr())===o&&(m=null),m!==o?((b=function e(){var t,n,r,i,a;return t=_n,(n=er())!==o&&(r=qn())!==o&&tr()!==o?((i=rr())===o&&(i=null),i!==o?((a=e())===o&&(a=null),a!==o?(n=ve(r,a),t=n):(_n=t,t=o)):(_n=t,t=o)):(_n=t,t=o),t}())===o&&(b=null),b!==o?((y=Un())===o&&(y=null),y!==o?e=t=p(n,i,s,u,f,g,v,b,y):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o),e===o&&(e=Fn()),e}function Fn(){var e,n;return e=_n,t.substr(_n,3)===g?(n=g,_n+=3):(n=o,0===Nn&&In(h)),n!==o&&(n=v()),(e=n)===o&&(e=_n,t.substr(_n,3)===m?(n=m,_n+=3):(n=o,0===Nn&&In(b)),n!==o&&(n=y()),(e=n)===o&&(e=_n,t.substr(_n,3)===w?(n=w,_n+=3):(n=o,0===Nn&&In(x)),n!==o&&(n=k()),(e=n)===o&&(e=_n,t.substr(_n,3)===E?(n=E,_n+=3):(n=o,0===Nn&&In(C)),n!==o&&(n=O()),(e=n)===o&&(e=_n,t.substr(_n,7)===_?(n=_,_n+=7):(n=o,0===Nn&&In(S)),n!==o&&(n=A()),(e=n)===o&&(e=_n,42===t.charCodeAt(_n)?(n=M,_n++):(n=o,0===Nn&&In(N)),n!==o&&(n=P()),e=n))))),e}function Gn(){var e,t,n,r,i,a;if(e=_n,(t=Hn())!==o){for(n=[],r=_n,(i=rr())===o&&(i=null),i!==o&&(a=Hn())!==o?r=i=[i,a]:(_n=r,r=o);r!==o;)n.push(r),r=_n,(i=rr())===o&&(i=null),i!==o&&(a=Hn())!==o?r=i=[i,a]:(_n=r,r=o);n!==o?e=t=T(t,n):(_n=e,e=o)}else _n=e,e=o;return e}function Hn(){var e,n,r,i,a;if(e=_n,n=_n,Nn++,r=$n(),Nn--,r===o?n=void 0:(_n=n,n=o),n!==o)if((r=Yn())!==o){if(i=[],L.test(t.charAt(_n))?(a=t.charAt(_n),_n++):(a=o,0===Nn&&In(j)),a!==o)for(;a!==o;)i.push(a),L.test(t.charAt(_n))?(a=t.charAt(_n),_n++):(a=o,0===Nn&&In(j));else i=o;i!==o&&(a=Qn())!==o?e=n=R(i):(_n=e,e=o)}else _n=e,e=o;else _n=e,e=o;return e}function $n(){var e,n,r,i;return e=_n,Yn()!==o?((n=rr())===o&&(n=null),n!==o&&(r=function(){var e,n,r,i;return e=_n,(n=function(){var e,n,r,i,a,s;return e=_n,(n=Jn())!==o?((r=rr())===o&&(r=null),r!==o?(t.substr(_n,4)===D?(i=D,_n+=4):(i=o,0===Nn&&In(q)),i!==o&&rr()!==o&&(a=function(){var e,n,r,i,a,s,l,u;if(e=_n,(n=Vn())!==o)if((r=rr())===o&&(r=null),r!==o){for(i=[],a=_n,44===t.charCodeAt(_n)?(s=G,_n++):(s=o,0===Nn&&In(H)),s!==o?((l=rr())===o&&(l=null),l!==o&&(u=Vn())!==o?a=s=[s,l,u]:(_n=a,a=o)):(_n=a,a=o);a!==o;)i.push(a),a=_n,44===t.charCodeAt(_n)?(s=G,_n++):(s=o,0===Nn&&In(H)),s!==o?((l=rr())===o&&(l=null),l!==o&&(u=Vn())!==o?a=s=[s,l,u]:(_n=a,a=o)):(_n=a,a=o);i!==o?(n=$(n,i),e=n):(_n=e,e=o)}else _n=e,e=o;else _n=e,e=o;return e}())!==o?((s=rr())===o&&(s=null),s!==o&&Zn()!==o?(n=U(a),e=n):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o),e}())===o&&(n=null),n!==o?((r=rr())===o&&(r=null),r!==o?((i=function(){var e,n,r,i,a,s;return e=_n,(n=Jn())!==o?((r=rr())===o&&(r=null),r!==o?(t.substr(_n,4)===K?(i=K,_n+=4):(i=o,0===Nn&&In(F)),i!==o&&rr()!==o&&(a=function(){var e,n,r,i,a,s,l,u;if(e=_n,(n=zn())!==o)if((r=rr())===o&&(r=null),r!==o){for(i=[],a=_n,44===t.charCodeAt(_n)?(s=G,_n++):(s=o,0===Nn&&In(H)),s!==o?((l=rr())===o&&(l=null),l!==o&&(u=zn())!==o?a=s=[s,l,u]:(_n=a,a=o)):(_n=a,a=o);a!==o;)i.push(a),a=_n,44===t.charCodeAt(_n)?(s=G,_n++):(s=o,0===Nn&&In(H)),s!==o?((l=rr())===o&&(l=null),l!==o&&(u=zn())!==o?a=s=[s,l,u]:(_n=a,a=o)):(_n=a,a=o);i!==o?(n=$(n,i),e=n):(_n=e,e=o)}else _n=e,e=o;else _n=e,e=o;return e}())!==o?((s=rr())===o&&(s=null),s!==o&&Zn()!==o?(n=U(a),e=n):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o),e}())===o&&(i=null),i!==o?(n=B(n,i),e=n):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o),e}())!==o?((i=rr())===o&&(i=null),i!==o&&Qn()!==o?e=I(r):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o),e}function Vn(){var e,t,n;return e=_n,(t=Wn())!==o&&(n=Xn())!==o?e=t=V(t,n):(_n=e,e=o),e}function zn(){var e,t,n,r;return e=_n,(t=Wn())!==o&&(n=Xn())!==o&&(r=Xn())!==o?e=t=z(t,n,r):(_n=e,e=o),e}function Wn(){var e,n;return e=_n,89===t.charCodeAt(_n)?(n=W,_n++):(n=o,0===Nn&&In(X)),n!==o&&(n=Y()),(e=n)===o&&(e=_n,71===t.charCodeAt(_n)?(n=Q,_n++):(n=o,0===Nn&&In(J)),n!==o&&(n=Z()),(e=n)===o&&(e=_n,82===t.charCodeAt(_n)?(n=ee,_n++):(n=o,0===Nn&&In(te)),n!==o&&(n=ne()),(e=n)===o&&(e=_n,66===t.charCodeAt(_n)?(n=re,_n++):(n=o,0===Nn&&In(oe)),n!==o&&(n=ie()),e=n))),e}function Xn(){var e,t,n;return e=_n,(t=fr())!==o&&(n=dr())!==o?e=t=ae(t,n):(_n=e,e=o),e}function Yn(){var e;return 123===t.charCodeAt(_n)?(e=se,_n++):(e=o,0===Nn&&In(le)),e}function Qn(){var e;return 125===t.charCodeAt(_n)?(e=ue,_n++):(e=o,0===Nn&&In(ce)),e}function Jn(){var e;return 91===t.charCodeAt(_n)?(e=fe,_n++):(e=o,0===Nn&&In(de)),e}function Zn(){var e;return 93===t.charCodeAt(_n)?(e=pe,_n++):(e=o,0===Nn&&In(ge)),e}function er(){var e;return 40===t.charCodeAt(_n)?(e=me,_n++):(e=o,0===Nn&&In(be)),e}function tr(){var e;return 41===t.charCodeAt(_n)?(e=ye,_n++):(e=o,0===Nn&&In(we)),e}function nr(){var e,n,r;if(Nn++,e=_n,n=[],Oe.test(t.charAt(_n))?(r=t.charAt(_n),_n++):(r=o,0===Nn&&In(_e)),r!==o)for(;r!==o;)n.push(r),Oe.test(t.charAt(_n))?(r=t.charAt(_n),_n++):(r=o,0===Nn&&In(_e));else n=o;return n!==o&&(n=Se(n)),Nn--,(e=n)===o&&(n=o,0===Nn&&In(Ce)),e}function rr(){var e,n;if(_n,e=[],32===t.charCodeAt(_n)?(n=Ae,_n++):(n=o,0===Nn&&In(Me)),n!==o)for(;n!==o;)e.push(n),32===t.charCodeAt(_n)?(n=Ae,_n++):(n=o,0===Nn&&In(Me));else e=o;return e!==o&&(e=Ne()),e}function or(){var e,n,r,i,a,s,l,u,c;return e=_n,(n=cr())===o&&(n=null),n!==o?(r=_n,Nn++,i=function(){var e,t,n,r,i;return e=_n,(t=lr())!==o?((n=pr())===o&&(n=null),n!==o&&(r=fr())!==o&&(i=dr())!==o?e=t=[t,n,r,i]:(_n=e,e=o)):(_n=e,e=o),e}(),Nn--,i!==o?(_n=r,r=void 0):r=o,r!==o&&(i=lr())!==o?((a=pr())===o&&(a=null),a!==o&&(s=fr())!==o&&(l=dr())!==o?((u=ar())===o&&(u=null),u!==o?((c=ir())===o&&(c=null),c!==o?e=n=Pe(n,i,a,s,l,u,c):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o),e===o&&(e=_n,(n=cr())===o&&(n=null),n!==o&&(r=fr())!==o&&(i=dr())!==o?((a=function(){var e;return 120===t.charCodeAt(_n)?(e=kn,_n++):(e=o,0===Nn&&In(En)),e===o&&(45===t.charCodeAt(_n)?(e=Cn,_n++):(e=o,0===Nn&&In(On))),e}())===o&&(a=null),a!==o&&(s=fr())!==o&&(l=dr())!==o?((u=ar())===o&&(u=null),u!==o?((c=ir())===o&&(c=null),c!==o?e=n=Te(n,r,i,a,s,l,u,c):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o),e===o&&(e=_n,(n=cr())===o&&(n=null),n!==o?((r=pr())===o&&(r=null),r!==o&&(i=fr())!==o&&(a=dr())!==o?((s=ar())===o&&(s=null),s!==o?((l=ir())===o&&(l=null),l!==o?e=n=Le(n,r,i,a,s,l):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o),e===o&&(e=_n,t.substr(_n,5)===je?(n=je,_n+=5):(n=o,0===Nn&&In(Re)),n!==o?((r=ir())===o&&(r=null),r!==o?e=n=Ie(r):(_n=e,e=o)):(_n=e,e=o),e===o&&(e=_n,t.substr(_n,3)===Be?(n=Be,_n+=3):(n=o,0===Nn&&In(De)),n!==o?((r=ir())===o&&(r=null),r!==o?e=n=qe(r):(_n=e,e=o)):(_n=e,e=o))))),e}function ir(){var e,n,r,i;return e=_n,n=_n,r=_n,Nn++,t.substr(_n,2)===Ue?(i=Ue,_n+=2):(i=o,0===Nn&&In(Ke)),Nn--,i===o?r=void 0:(_n=r,r=o),r!==o?(43===t.charCodeAt(_n)?(i=Fe,_n++):(i=o,0===Nn&&In(Ge)),i!==o?n=r=[r,i]:(_n=n,n=o)):(_n=n,n=o),n!==o&&(n=He(n)),(e=n)===o&&(e=_n,n=_n,r=_n,Nn++,t.substr(_n,3)===$e?(i=$e,_n+=3):(i=o,0===Nn&&In(Ve)),Nn--,i===o?r=void 0:(_n=r,r=o),r!==o?(35===t.charCodeAt(_n)?(i=ze,_n++):(i=o,0===Nn&&In(We)),i!==o?n=r=[r,i]:(_n=n,n=o)):(_n=n,n=o),n!==o&&(n=He(n)),e=n),e}function ar(){var e,n,r;return e=_n,61===t.charCodeAt(_n)?(n=Xe,_n++):(n=o,0===Nn&&In(Ye)),n!==o&&(r=cr())!==o?e=n=Qe(r):(_n=e,e=o),e}function sr(){var e,n,r,i;return e=_n,(n=function(){var e,n,r;return e=_n,36===t.charCodeAt(_n)?(n=Ze,_n++):(n=o,0===Nn&&In(et)),n!==o&&(r=nr())!==o?(n=tt(r),e=n):(_n=e,e=o),e===o&&(e=_n,t.substr(_n,2)===nt?(n=nt,_n+=2):(n=o,0===Nn&&In(rt)),n!==o&&(n=ot()),(e=n)===o&&(e=_n,t.substr(_n,2)===it?(n=it,_n+=2):(n=o,0===Nn&&In(at)),n!==o&&(n=st()),(e=n)===o&&(e=_n,t.substr(_n,2)===lt?(n=lt,_n+=2):(n=o,0===Nn&&In(ut)),n!==o&&(n=ct()),(e=n)===o&&(e=_n,t.substr(_n,2)===ft?(n=ft,_n+=2):(n=o,0===Nn&&In(dt)),n!==o&&(n=pt()),(e=n)===o&&(e=_n,33===t.charCodeAt(_n)?(n=gt,_n++):(n=o,0===Nn&&In(ht)),n!==o&&(n=vt()),(e=n)===o&&(e=_n,63===t.charCodeAt(_n)?(n=mt,_n++):(n=o,0===Nn&&In(bt)),n!==o&&(n=yt()),(e=n)===o&&(e=_n,8252===t.charCodeAt(_n)?(n=wt,_n++):(n=o,0===Nn&&In(xt)),n!==o&&(n=ot()),(e=n)===o&&(e=_n,8263===t.charCodeAt(_n)?(n=kt,_n++):(n=o,0===Nn&&In(Et)),n!==o&&(n=st()),(e=n)===o&&(e=_n,8265===t.charCodeAt(_n)?(n=Ct,_n++):(n=o,0===Nn&&In(Ot)),n!==o&&(n=ct()),(e=n)===o&&(e=_n,8264===t.charCodeAt(_n)?(n=_t,_n++):(n=o,0===Nn&&In(St)),n!==o&&(n=pt()),(e=n)===o&&(e=_n,9633===t.charCodeAt(_n)?(n=At,_n++):(n=o,0===Nn&&In(Mt)),n!==o&&(n=Nt()),(e=n)===o&&(e=_n,61===t.charCodeAt(_n)?(n=Xe,_n++):(n=o,0===Nn&&In(Ye)),n!==o&&(n=Pt()),(e=n)===o&&(e=_n,8734===t.charCodeAt(_n)?(n=Tt,_n++):(n=o,0===Nn&&In(Lt)),n!==o&&(n=jt()),(e=n)===o&&(e=_n,10866===t.charCodeAt(_n)?(n=Rt,_n++):(n=o,0===Nn&&In(It)),n!==o&&(n=Bt()),(e=n)===o&&(e=_n,10865===t.charCodeAt(_n)?(n=Dt,_n++):(n=o,0===Nn&&In(qt)),n!==o&&(n=Ut()),(e=n)===o&&(e=_n,177===t.charCodeAt(_n)?(n=Kt,_n++):(n=o,0===Nn&&In(Ft)),n!==o&&(n=Gt()),(e=n)===o&&(e=_n,8723===t.charCodeAt(_n)?(n=Ht,_n++):(n=o,0===Nn&&In($t)),n!==o&&(n=Vt()),(e=n)===o&&(e=_n,t.substr(_n,2)===Ue?(n=Ue,_n+=2):(n=o,0===Nn&&In(Ke)),n!==o&&(n=zt()),(e=n)===o&&(e=_n,t.substr(_n,2)===Wt?(n=Wt,_n+=2):(n=o,0===Nn&&In(Xt)),n!==o&&(n=Yt()),(e=n)===o&&(e=_n,10752===t.charCodeAt(_n)?(n=Qt,_n++):(n=o,0===Nn&&In(Jt)),n!==o&&(n=Zt()),(e=n)===o&&(e=_n,10227===t.charCodeAt(_n)?(n=en,_n++):(n=o,0===Nn&&In(tn)),n!==o&&(n=nn()),(e=n)===o&&(e=_n,8594===t.charCodeAt(_n)?(n=rn,_n++):(n=o,0===Nn&&In(on)),n!==o&&(n=an()),(e=n)===o&&(e=_n,8593===t.charCodeAt(_n)?(n=sn,_n++):(n=o,0===Nn&&In(ln)),n!==o&&(n=un()),(e=n)===o&&(e=_n,8646===t.charCodeAt(_n)?(n=cn,_n++):(n=o,0===Nn&&In(fn)),n!==o&&(n=dn()),(e=n)===o&&(e=_n,68===t.charCodeAt(_n)?(n=pn,_n++):(n=o,0===Nn&&In(gn)),n!==o&&(n=hn()),e=n))))))))))))))))))))))))),e}())!==o?((r=rr())===o&&(r=null),r!==o?((i=sr())===o&&(i=null),i!==o?e=n=Je(n,i):(_n=e,e=o)):(_n=e,e=o)):(_n=e,e=o),e}function lr(){var e;return(e=fr())===o&&(e=dr()),e}function ur(){var e,n,r,i;if(e=_n,(n=nr())!==o){if(r=[],46===t.charCodeAt(_n)?(i=xe,_n++):(i=o,0===Nn&&In(ke)),i!==o)for(;i!==o;)r.push(i),46===t.charCodeAt(_n)?(i=xe,_n++):(i=o,0===Nn&&In(ke));else r=o;r!==o?e=n=Ee(n):(_n=e,e=o)}else _n=e,e=o;return e}function cr(){var e;return vn.test(t.charAt(_n))?(e=t.charAt(_n),_n++):(e=o,0===Nn&&In(mn)),e}function fr(){var e;return bn.test(t.charAt(_n))?(e=t.charAt(_n),_n++):(e=o,0===Nn&&In(yn)),e}function dr(){var e;return wn.test(t.charAt(_n))?(e=t.charAt(_n),_n++):(e=o,0===Nn&&In(xn)),e}function pr(){var e;return 120===t.charCodeAt(_n)?(e=kn,_n++):(e=o,0===Nn&&In(En)),e}if((r=a())!==o&&_n===t.length)return r;throw r!==o&&_n<t.length&&In({type:"end"}),Bn(Mn,An<t.length?t.charAt(An):null,An<t.length?Rn(An,An+1):Rn(An,An))}}}(),PgnBaseDefaults=window.PgnBaseDefaults?window.PgnBaseDefaults:{};function PgnScheduler(){this.list=[]}window.pgnTestRegistry={};var GLOB_SCHED=new PgnScheduler;GLOB_SCHED.schedule=function(e,t,n){let r=void 0!==e?e:"en";i18next.hasResourceBundle(r)?t.call(null):i18next.loadLanguages(r,(e,r)=>{let o=t.call(null);void 0!==n&&n.call(null,o)})};let initI18n=function(){let e=window.PgnBaseDefaults.localesPattern||"locales/{{ns}}-{{lng}}.json";var t={backend:{loadPath:window.PgnBaseDefaults.loadPath||function(){if(window.PgnBaseDefaults.localPath)return window.PgnBaseDefaults.localPath;let e=document.querySelector("script[src*=pgnvjs]").src;var t=e.indexOf("pgnvjs");return console.log("Local path: "+e.substring(0,t-3)),e.substring(0,t-3)}()+e},cache:{enabled:!0},fallbackLng:"en",ns:["chess","nag","buttons"],defaultNS:"chess",debug:!1};i18next.use(window.i18nextXHRBackend).use(window.i18nextLocalStorageCache).init(t,(e,t)=>{})};initI18n();var pgnBase=function(e,t){let n={},r=new Utils;n.promMappings={q:"queen",r:"rook",b:"bishop",n:"knight"},n.configuration=Object.assign(Object.assign({width:"320px",showNotation:!0,orientation:"white",position:"start",showFen:!1,layout:"top",headers:!0,timerTime:700,locale:"en",movable:{free:!1},highlight:{lastMove:!0},viewOnly:!0,hideMovesBefore:!1,colorMarker:null,showResult:!1},PgnBaseDefaults),t);let o=new Chess;n.mypgn=pgnReader(n.configuration,o);let i=n.configuration.theme||"default";n.configuration.markup="object"==typeof e;let a,s=function(){return n.configuration.markup},l=function(e){return n.configuration.mode===e},u=function(){return n.mypgn.possibleMoves(o)};if(s());else var c,f=e+"Headers",d=e+"Moves",p=e+"Button",g=e+"Fen",h=(c=e+"Inner")+"ColorMarker";if(n.configuration.locale&&(n.configuration.locale=n.configuration.locale.replace(/_/g,"-"),i18next.loadLanguages(n.configuration.locale,(e,t)=>{})),n.configuration.position&&"start"!==n.configuration.position){4==n.configuration.position.split(/\s+/).length&&(n.configuration.position+=" 1 1")}function v(e){var t=document.createElement("DIV"),r=document.createTextNode(e);t.appendChild(r),n.errorDiv.appendChild(t)}function m(e,t){let n=r.pvIsElement(e)?e:document.getElementById(e);n&&(n.classList?n.classList.add(t):n.className+=" "+t)}function b(e,t){let n=r.pvIsElement(e)?e:document.getElementById(e);null!==n&&(n.classList?n.classList.remove(t):n.className=n.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))}function y(e,t,n){let o=r.pvIsElement(e)?e:document.getElementById(e);null!==o&&o.addEventListener(t,n)}function w(){let e=document.getElementById(h);e&&(e.classList.contains("cm-black")?e.classList.remove("cm-black"):e.classList.add("cm-black"))}function x(e,t,n,r,o){var i=document.createElement(e);return t&&i.setAttribute("id",t),n&&(r?i.setAttribute("class",r+" "+n):i.setAttribute("class",n)),o&&o.appendChild(i),i}var k=function(e){return document.getElementById(d+e)},E=function(t,r,o,i,a,s){var l=function(e,t){var n=x("span",null,"comment "+t);return e&&"string"==typeof e&&n.appendChild(document.createTextNode(" "+e+" ")),n};if(null==o)return i;var u="move";o.variationLevel>0&&(u=u+" var var"+o.variationLevel),"w"==o.turn&&(u+=" white");var c=x("span",d+t,u);if(n.mypgn.startVariation(o)){var f=x("div",null,"variation");if(0==s.length){var p=null;p="number"==typeof o.prev?n.mypgn.getMove(o.prev).next:0,k(p).appendChild(f)}else s[s.length-1].appendChild(f);s.push(f)}if(c.appendChild(l(o.commentMove,"moveComment")),"w"==o.turn||n.mypgn.startVariation(o)||n.mypgn.afterMoveWithVariation(o)){var g=o.moveNumber;x("span",null,"moveNumber",null,c).appendChild(document.createTextNode(g+("w"==o.turn?". ":"... ")))}c.appendChild(l(o.commentBefore,"beforeComment"));var h=x("a",null,null,null,c),v=n.mypgn.sanWithNags(o),m=document.createTextNode(v);if(h.appendChild(m),c.appendChild(document.createTextNode(" ")),c.appendChild(l(o.commentAfter,"afterComment")),function(e,t,n,r){var o,i,a;0==r.length?"number"==typeof e?(o=t,i=k(e),(a=i.parentNode).lastChild==i?a.appendChild(o):a.insertBefore(o,i.nextSibling)):n.appendChild(t):r[r.length-1].appendChild(t)}(o.prev,c,a,s),n.mypgn.endVariation(o)&&s.pop(),y(k(t),"click",function(e){_(n.currentMove,t,o.fen),e.stopPropagation()}),n.mypgn.has_diagram_nag(o)){var b=e+"dia"+t,w=x("div",b);c.appendChild(w),n.configuration.position=o.fen,pgnBoard(b,n.configuration)}return t};function C(e){var t;b(document.querySelector("#"+d+" a.yellow"),"yellow"),m((t=e,document.querySelector("#"+d+t+"> a")),"yellow")}var O=function(e){let t=document.querySelectorAll("div.buttons .gray");r.pvEach(t,function(e){b(e,"gray")});var o=n.mypgn.getMove(e);null===e&&["prev","first"].forEach(function(e){m(document.querySelector("div.buttons ."+e),"gray")}),null!==e&&"number"!=typeof o.next&&["next","play","last"].forEach(function(e){m(document.querySelector("div.buttons ."+e),"gray")});try{if(void 0===o)return;document.querySelector("#nagMenu"+p);document.querySelectorAll("#nagMenu"+p+" a.active").forEach(function(e){e.classList.toggle("active")}),(o.nag||[]).forEach(function(e){document.querySelector("#nagMenu"+p+' [data-value="'+e.substring(1)+'"]').parentNode.classList.toggle("active")})}catch(e){}},_=function(t,r,i){let s=n.mypgn.getMove(r),c=s?s.fen:i;var f,d;if(c||(c="start"==n.configuration.position?"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1":n.configuration.position),s?a.set({fen:c,lastMove:[s.from,s.to]}):a.set({fen:c,lastMove:[]}),function(e){if(e&&e.notation.promotion){let t=e.notation.promotion.substring(1,2).toLowerCase(),r={};r[e.to]={role:n.mypgn.PROMOTIONS[t],color:"w"==e.turn?"white":"black"},a.setPieces(r)}}(s),s&&a.setShapes(function(e){function t(e){return{Y:"yellow",R:"red",B:"blue",G:"green"}[e]}let n=[];if(null!=e){if(e.colorArrows)for(var r=0;r<e.colorArrows.length;r++){let o=e.colorArrows[r];n.push({orig:o.substring(1,3),dest:o.substring(3,5),brush:t(o.substring(0,1))})}if(e.colorFields)for(let r=0;r<e.colorFields.length;r++){let o=e.colorFields[r];n.push({orig:o.substring(1,3),brush:t(o.substring(0,1))})}}return n}(s.commentDiag)),o.load(c),C(r),n.currentMove=r,r&&(f=k(r),function(e,t){let n=e.getBoundingClientRect(),r=e.clientHeight,o=(e.clientWidth,t.getBoundingClientRect());o.top>=n.top&&o.top<=n.top+r||(e.scrollTop=o.top+e.scrollTop-n.top)}((d=f).offsetParent,d)),l("edit")){let t="w"==o.turn()?"white":"black";a.set({movable:Object.assign({},a.state.movable,{color:t,dests:u()}),turnColor:t,check:o.in_check()}),r&&function(t){let r=n.mypgn.getMove(t);~r&&(r.commentAfter?(document.querySelector("#"+e+" input.afterComment").checked=!0,document.querySelector("#"+e+" textarea.comment").value=r.commentAfter):r.commentBefore?(document.querySelector("#"+e+" input.beforeComment").checked=!0,document.querySelector("#"+e+" textarea.comment").value=r.commentBefore):r.commentMove?(document.querySelector("#"+e+" input.moveComment").checked=!0,document.querySelector("#"+e+" textarea.comment").value=r.commentMove):document.querySelector("#"+e+" textarea.comment").value="")}(r)}else if(l("view")){let e="w"==o.turn()?"white":"black";a.set({movable:Object.assign({},a.state.movable,{color:e}),turnColor:e,check:o.in_check()})}let p=document.getElementById(g);p&&(p.value=i),w(),O(r)};let S={chess:o,board:a,getPgn:function(){return n.mypgn},generateHTML:function(){function t(e,t){var r=["green","blue"].indexOf(i)>=0?i:"default",o=x("i",p+e[0],"button fa "+e[1],r,t),a=i18next.t("buttons:"+e[0],{lng:n.configuration.locale});return document.getElementById(p+e[0]).setAttribute("title",a),o}var r=function(e){[["flipper","fa-adjust"],["first","fa-fast-backward"],["prev","fa-step-backward"],["next","fa-step-forward"],["play","fa-play-circle"],["last","fa-fast-forward"]].forEach(function(n){t(n,e)})},o=function(e){[["promoteVar","fa-hand-o-up"],["deleteMoves","fa-scissors"]].forEach(function(n){t(n,e)}),[["pgn","fa-print"],["nags","fa-cog"]].forEach(function(n){t(n,e)})};let a=function(e){let t=function(e,t,r){let o=x("div",null,t,i,r);e.forEach(e=>(function(e,t){let r=x("a",null,null,i,o);!function(e,t){let r=x("i",null,null,i,t),o=n.mypgn.NAGS[e]||"";r.setAttribute("data-symbol",o),r.setAttribute("data-value",e),r.textContent=i18next.t("nag:$"+e+"_menu",{lng:n.configuration.locale})}(e,r),r.addEventListener("click",function(){this.classList.toggle("active");let e=this.firstChild;n.mypgn.changeNag("$"+e.getAttribute("data-value"),n.currentMove,this.classList.contains("active")),function(e){let t=n.mypgn.getMove(e);document.querySelector("#"+d+e+" > a").textContent=n.mypgn.sanWithNags(t)}(n.currentMove)})})(e))};t([1,2,3,4,5,6,7,146],"nagMove",e),t([10,13,14,15,16,17,18,19],"nagPosition",e),t([22,40,36,132,136,32,44,140],"nagObservation",e)};if(s())e.header&&m(f=e.header,"headers"),e.inner&&m(c=e.inner,"board"),e.button&&(m(p=e.button,"buttons"),r(document.getElementById(p))),e.moves&&m(d=e.moves,"moves"),e.editButton&&o(document.getElementById(e.editButton));else{var u=document.getElementById(e);if(null==u)return;for(;u.childNodes.length>0;)u.removeChild(u.childNodes[0]);u.classList.add(i),u.classList.add("whole"),u.setAttribute("tabindex","0"),n.configuration.layout&&u.classList.add("layout-"+n.configuration.layout),n.errorDiv=x("div",e+"Error","error",null,u),x("div",f,"headers",i,u);var v=x("div",null,"outerBoard",null,u);let t=x("div",null,"boardAnd",i,v);if(n.configuration.boardSize&&(v.style.width=n.configuration.boardSize),n.configuration.width||n.configuration.boardSize){let e=n.configuration.width?n.configuration.width:n.configuration.boardSize;t.style.display="grid",t.style.gridTemplateColumns=e+" 40px"}if(x("div",c,"board",i,t),n.configuration.colorMarker&&!l("print")&&x("div",h,"colorMarker "+n.configuration.colorMarker,i,t),(l("view")||l("edit"))&&r(x("div",p,"buttons",i,v)),(l("edit")||l("view"))&&n.configuration.showFen){x("textarea",g,"fen",i,v),y(g,"mousedown",function(e){(e=e||window.event).preventDefault(),this.select()}),l("edit")?document.getElementById(g).onpaste=function(t){var r=t.originalEvent.clipboardData.getData("text");n.configuration.position=r,n.configuration.pgn="",pgnEdit(e,n.configuration)}:document.getElementById(g).readonly=!0;let t=n.configuration.width?n.configuration.width:n.configuration.boardSize;document.getElementById(g).style.width=t}if(l("print")||l("view")||l("edit")){var b=x("div",d,"moves",null,u);n.configuration.movesWidth?b.style.width=n.configuration.movesWidth:n.configuration.width&&(b.style.width=n.configuration.width),n.configuration.movesHeight&&(b.style.height=n.configuration.movesHeight)}l("edit")&&(o(x("div","edit"+p,"edit",i,u)),a(x("div","nagMenu"+p,"nagMenu",i,u)),x("textarea","pgn"+p,"pgn",i,u),function(e){var t=x("div",null,"commentRadio",i,e),n=x("input",null,"moveComment",i,t);n.type="radio",n.value="move",n.name="radio",x("label",null,"labelMoveComment",i,t).appendChild(document.createTextNode("Move"));var r=x("input",null,"beforeComment",i,t);r.type="radio",r.value="before",r.name="radio",x("label",null,"labelBeforeComment",i,t).appendChild(document.createTextNode("Before"));var o=x("input",null,"afterComment",i,t);o.type="radio",o.value="after",o.name="radio",x("label",null,"labelAfterComment",i,t).appendChild(document.createTextNode("After")),x("textarea",null,"comment",i,e)}(x("div","comment"+p,"comment",i,u)),y("pgn"+p,"mousedown",function(e){(e=e||window.event).preventDefault(),e.target.select()}),document.getElementById("pgn"+p).onpaste=function(t){var r=t.originalEvent.clipboardData.getData("text");n.configuration.pgn=r,pgnEdit(e,n.configuration)}),x("div",null,"endBoard",null,u)}},generateBoard:function(){let e={coordsInner:!0,coordsFactor:1,disableContextMenu:!0,drawable:{onChange:e=>{let t=n.mypgn.getMove(n.currentMove);n.mypgn.setShapes(t,e)}}};var t,i,s;t=n.configuration,i=e,s=["position","orientation","showNotation","pieceTheme","draggable","coordsInner","coordsFactor","width","movable","viewOnly","highlight","boardSize","rankFontSize"],r.pvEach(s,function(e){void 0!==t[e]&&(i[e]=t[e])}),void 0!==e.showNotation&&(e.coordinates=e.showNotation),e.fen=e.position;var f=document.getElementById(c);if(void 0!==n.configuration.pieceStyle&&(f.className+=" "+n.configuration.pieceStyle),e.boardSize&&(e.width=e.boardSize),a=Chessground(f,e),e.width){f.style.width=e.width,f.style.height=e.width;let t=null;t=e.rankFontSize?e.rankFontSize:Math.max(8,Math.round(parseInt(e.width.slice(0,-2))/28*e.coordsFactor)),f.style.fontSize=`${t}px`,document.body.dispatchEvent(new Event("chessground.resize"))}if(e.coordsInner&&f.classList.add("coords-inner"),l("edit")){o.load(e.position);let t="w"==o.turn()?"white":"black";a.set({movable:Object.assign({},a.state.movable,{color:t,dests:u()}),turnColor:t,check:o.in_check()})}if(n.configuration.colorMarker&&"start"!=n.configuration.position&&"b"==n.configuration.position.split(" ")[1]){let e=document.getElementById(h);e&&e.classList.add("cm-black")}return a},generateMoves:function(t){try{n.mypgn.load_pgn()}catch(e){if(void 0!==e.location){var a=e.location.start.offset;let t=n.configuration.pgn;v("Offset: "+a),v("PGN: "+t),v(e.message)}else v("PGN: "+n.configuration.pgn),v(e)}var u=n.mypgn.getMoves();"start"==n.configuration.position?o.reset():o.load(n.configuration.position),null!==t&&t.set({fen:o.fen()});let c=document.getElementById(g);r.pvIsElement(c)&&(c.value=o.fen());var h=function(){return n.mypgn.write_pgn()},m=function(e){document.getElementById("pgn"+p).textContent=e},b=function(e){for(var t=document.getElementById(d),r=null,i=[],a=0;a<e.length;a++)if(!n.mypgn.isDeleted(a)){var s=e[a];r=E(s.index,o,s,r,t,i)}};b(u),function(){var r=function(t,n){var r;r=s()?"#"+e.moves:"#"+e+",#"+e+"Moves";var o=document.querySelector(r);Mousetrap(o).bind(t,function(e){n(),e.stopPropagation()})},o=function(){var e=null;if(void 0===n.currentMove||null===n.currentMove)e=n.mypgn.getMove(0).fen,_(null,0,e);else{var t=n.mypgn.getMove(n.currentMove).next;e=n.mypgn.getMove(t).fen,_(n.currentMove,t,e)}},i=function(){var e=null;if(void 0===n.currentMove||null==n.currentMove);else{var t=n.mypgn.getMove(n.currentMove).prev;void 0===t||null==t?a():(e=n.mypgn.getMove(t).fen,_(n.currentMove,t,e))}},a=function(){_(null,null,null)},u=new Timer(10);if(u.bind(n.configuration.timerTime,function(){o()}),y(p+"flipper","click",function(){t.toggleOrientation()}),y(p+"next","click",function(){o()}),y(p+"prev","click",function(){i()}),y(p+"first","click",function(){a()}),y(p+"last","click",function(){var e=n.mypgn.getMove(n.mypgn.getMoves().length-1).fen;_(n.currentMove,n.mypgn.getMoves().length-1,e)}),l("edit")){y(p+"pgn","click",function(){!function(){if(document.getElementById(p+"pgn"),document.getElementById(e+" .outerpgn"),document.getElementById(p+"pgn").classList.toggle("selected"),document.getElementById(p+"pgn").classList.contains("selected")){var t=h();m(t),document.querySelector("#"+e+" .pgn").style.display="block"}else document.querySelector("#"+e+" .pgn").style.display="none"}()}),y(p+"nags","click",function(){document.getElementById(p+"nags").classList.toggle("selected"),document.getElementById(p+"nags").classList.contains("selected")?document.getElementById("nagMenu"+p).style.display="flex":document.getElementById("nagMenu"+p).style.display="none"}),y(p+"deleteMoves","click",function(){var e=n.mypgn.getMove(n.currentMove).prev,t=n.mypgn.getMove(e).fen;n.mypgn.deleteMove(n.currentMove);let r=document.getElementById(d);for(;r.firstChild;)r.removeChild(r.firstChild);b(n.mypgn.getMoves()),_(null,e,t)}),y(p+"promoteVar","click",function(){let e=n.currentMove;n.mypgn.promoteMove(n.currentMove);let t=document.getElementById(d);for(;t.firstChild;)t.removeChild(t.firstChild);b(n.mypgn.getOrderedMoves());let r=n.mypgn.getMove(e).fen;_(null,n.currentMove,r)}),document.querySelector("#"+e+" .pgn").style.display="none",document.querySelector("#comment"+p+" textarea.comment").onchange=function(){let e=" "+document.querySelector("#comment"+p+" textarea.comment").value+" ",t=document.querySelector("#comment"+p+" :checked");t=t?t.value:"after",k(n.currentMove).querySelector("."+t+"Comment").textContent=e,"after"===t?n.mypgn.getMove(n.currentMove).commentAfter=e:"before"===t?n.mypgn.getMove(n.currentMove).commentBefore=e:"move"===t&&(n.mypgn.getMove(n.currentMove).commentMove=e)};for(var c=["moveComment","beforeComment","afterComment"],f=0;f<c.length;f++)document.querySelector("#comment"+p+" ."+c[f]).onclick=function(){var t,r=this.value;"after"===r?t=n.mypgn.getMove(n.currentMove).commentAfter:"before"===r?t=n.mypgn.getMove(n.currentMove).commentBefore:"move"===r&&(t=n.mypgn.getMove(n.currentMove).commentMove),document.querySelector("#"+e+" textarea.comment").value=t}}r("left",i),r("right",o),y(p+"play","click",function(){!function(){u.running()?u.stop():u.start();var e=document.getElementById(p+"play"),t=e.getAttribute("class");t=t.indexOf("play")<0?t.replace("stop","play"):t.replace("play","stop"),e.setAttribute("class",t)}()})}(),function(){var e=n.mypgn.getHeaders();if(0==n.configuration.headers||r.pvIsEmpty(e)){let e=document.getElementById(f);e.parentNode.removeChild(e)}else{var t=document.getElementById(f),o=x("span",null,"whiteHeader",i,t);e.White&&o.appendChild(document.createTextNode(e.White+" "));var a=x("span",null,"blackHeader",i,t);e.Black&&a.appendChild(document.createTextNode(" "+e.Black));var s="";[e.Event,e.Site,e.Round,e.Date,e.ECO,e.Result].forEach(function(e){s=function(e,t,n){return t&&(e.length>0&&(e+=n),e+=t),e}(s,e," | ")}),x("span",null,"restHeader",i,t).appendChild(document.createTextNode(s))}}(),function(){if(n.configuration.startPlay&&!n.configuration.hideMovesBefore){let e=function(){let e=n.configuration.startPlay;if(!isNaN(e)){e-=1;let t=n.mypgn.getMove(0);for(;e>0;)e-=1,t=n.mypgn.getMove(t.next);return t}let t=n.mypgn.getMoves();for(let n of t){if(n.fen.startsWith(e))return n;if(n.notation.notation==e)return n}}();if(void 0===e)return void v("Could not find startPlay: "+n.configuration.startPlay);_(e.prev,e.index,e.fen),C(e.index)}if(n.configuration.showResult){let e=n.mypgn.getEndGame();x("span",d+"Result","move",i,document.getElementById(d)).innerHTML=e||"*"}}()},onSnapEnd:async function(e,t,r){var i=n.currentMove;let s={from:e,to:t};if("p"==n.mypgn.game.get(e).type&&("8"==t.substring(1,2)||"1"==t.substring(1,2))){let e=await swal("Select the promotion figure",{buttons:{queen:{text:"Queen",value:"q"},rook:{text:"Rook",value:"r"},bishop:{text:"Bishop",value:"b"},knight:{text:"Knight",value:"n"}}});s.promotion=e}n.currentMove=n.mypgn.addMove(s,i);var l=n.mypgn.getMove(n.currentMove);if(s.promotion){let e={};e[t]=null,a.setPieces(e),e[t]={color:"w"==l.turn?"white":"black",role:n.promMappings[s.promotion]},a.setPieces(e)}if(l.notation.ep){let n={};n[t[0]+e[1]]=null,a.setPieces(n)}null===k(n.currentMove)&&E(n.currentMove,null,l,l.prev,document.getElementById(d),[]),C(n.currentMove),O(n.currentMove);let c="w"==l.turn?"black":"white";a.set({movable:Object.assign({},a.state.movable,{color:c,dests:u()}),check:o.in_check()});let f=document.getElementById(g);f&&(f.value=l.fen),w()}};return window.pgnTestRegistry[e]=S,S},pgnView=function(e,t){GLOB_SCHED.schedule(t.locale,()=>{var n=pgnBase(e,Object.assign({mode:"view"},t));n.generateHTML();var r=n.generateBoard();n.generateMoves(r)})},pgnBoard=function(e,t){GLOB_SCHED.schedule(t.locale,()=>{let n=pgnBase(e,Object.assign({headers:!1,mode:"board"},t));n.generateHTML();let r=n.generateBoard();return{chess:n.chess,board:r}})},pgnEdit=function(e,t){GLOB_SCHED.schedule(t.locale,()=>{let n=pgnBase(e,Object.assign({showFen:!0,mode:"edit",movable:{free:!1,events:{after:function(e,t,r){n.onSnapEnd(e,t,r)}}},viewOnly:!1},t));n.generateHTML();let r=n.generateBoard();n.generateMoves(r)})},pgnPrint=function(e,t){GLOB_SCHED.schedule(t.locale,()=>{let n=pgnBase(e,Object.assign({showNotation:!1,mode:"print"},t));n.generateHTML(),n.generateMoves(null)})};